@(mapDiccionario: Map[String,String], mapPermiso: Map[String,String], userMnu: utilities.UserMnu,
lista: List[List[String]], bodegaEmpresa: tables.BodegaEmpresa,
desdeAAMMDD: String, hastaAAMMDD: String, usd: Double, eur: Double, uf: Double, nroDec: Long, nomMon: String)

    	
@main("") {

@menues(mapDiccionario, mapPermiso, userMnu, " ")
	<div id="mostrarmostrar" style="display:none;">
		@barraTitulo(mapDiccionario, "DETALLE EP ESTADO EQUIPO COBRAR "+mapDiccionario.get("ARRIENDO")+" POR DAÃ‘OS " + mapDiccionario.get("BODEGA") + "/PROYECTO: " + bodegaEmpresa.getNombre(),
			"PERIODO: desde " + utilities.Fechas.DDMMAA(desdeAAMMDD) +" --- hasta: " +  utilities.Fechas.DDMMAA(hastaAAMMDD))
		<div class="row  justify-content-md-center">
			<div class="col-xs-12 col-sm-10 col-md-10 col-lg-10">
				<div class="noprint">
					<table class="table table-sm table-condensed table-fluid">
						<tr>
							<td width="25%">
								<div class="input-group">
									<div class="input-group-prepend">
										<span class="input-group-text" id="basic-addon1">BUSCAR</span>
									</div>
									<input type="text" class="form-control left"
									id="searchTermtablaPrincipal"
									onkeyup="doSearch2('tablaPrincipal');">
								</div>
							</td>
							<td>
								<div align="center">
									<button type="button"  class="btn btn-sm btn-success" onclick="document.getElementById('excel').submit()">
										Exportar a Excel
									</button>
									<button type="button" class="btn btn-sm btn-success" tabindex="-1" onclick="window.print(); return false;" >
										Imprimir
									</button>
									<button type="button"  class="btn btn-sm btn-success"
									onclick="history.go(-1);return false;">
										Volver
									</button>
								</div>
							</td>
							<td width="30%">
								<div align="right">
									ENVIAR A:
									<button id="btnArr" type="button" class="btn btn-mini btn-info" tabindex="-1"
											onclick=" this.disabled = true; document.getElementById('formProforma').submit()">
										Listado y Ajustes
									</button>
								</div>
							</td>
						</tr>
					</table>
				</div>
				<form id="excel" class="formulario" method="post" action="/routes3/estadosFacturaProyectoDetExcel/">
					<input type="hidden" name="fechaDesde" value="@desdeAAMMDD">
					<input type="hidden" name="fechaHasta" value="@hastaAAMMDD">
					<input type="hidden" name="uf" value="@uf">
					<input type="hidden" name="usd" value="@usd">
					<input type="hidden" name="eur" value="@eur">
					<input type="hidden" name="id_bodegaEmpresa" value="@bodegaEmpresa.getId()">
				</form>
				<form id="formProforma" class="formulario" method="post" action="/routes3/enviarAlistAjustes/">
					<input type="hidden" name="fechaDesde" value="@desdeAAMMDD">
					<input type="hidden" name="fechaHasta" value="@hastaAAMMDD">
					<input type="hidden" name="uf" value="@uf">
					<input type="hidden" name="usd" value="@usd">
					<input type="hidden" name="eur" value="@eur">
					<input type="hidden" name="id_bodegaEmpresa" value="@bodegaEmpresa.getId()">
				</form>
				<table id="tablaPrincipal" class="table table-sm table-hover table-bordered table-condensed table-fluid">
					<thead style="background-color: #eeeeee">
						<TR>
					        <TH>GRUPO</TH>
					        <TH>COTI</TH>
							<TH>CODIGO</TH>
					        <TH>EQUIPO</TH>
							<TH>FECHA<BR>MOVIM</TH>
					        <TH>NRO<BR></BR>MOVIM</TH>
							<TH>REF<BR> CLIENTE</TH>
							<TH>CANT<br>DIAS</TH>
							<TH>P.UNITARIO<BR>@mapDiccionario.get("ARR") X DIA</TH>
							<TH>CANT<BR>EQUIPOS</TH>
							<TH>TOTAL<BR>(en @nomMon)</TH>
						</TR>
					</thead>
					<tbody>
						@for(lista1 <- lista){
							<TR>
								<td  style="text-align:left;">@lista1.get(1)</td>
								<td  style="text-align:center;">@lista1.get(2)</td>
								<td  style="text-align:left;">@lista1.get(3)</td>
								<td  style="text-align:left;">@lista1.get(4)</td>
								<td  style="text-align:center; min-width: 80px">
									<div style="display: none">@lista1.get(5)</div>
									@utilities.Fechas.DDMMAA(lista1.get(5))
								</td>
								<td  style="text-align:center;">@lista1.get(6)</td>
								<td  style="text-align:center;">@lista1.get(7)</td>
								<td  style="text-align:center;">@lista1.get(8)</td>
								<td  style="text-align:right;">@lista1.get(9)</td>
								<td  class="cant" style="text-align:right;">@lista1.get(10)</td>
								<td  class="total" style="text-align:right;">@lista1.get(11)</td>
							</TR>
			 			}
					</tbody>
					<tfoot>
						<TR>
							<TH>TOTALES</TH>
							<TH></TH>
							<TH></TH>
							<TH></TH>
							<TH></TH>
							<TH></TH>
							<TH></TH>
							<TH></TH>
							<TH></TH>
							<TH style="text-align:right;"><div id="totalCant"></div></TH>
							<TH style="text-align:right;"><div id="granTotal"></div></TH>
						</TR>
					</tfoot>
				</table>
			</div>
		</div>
		<div class="noprint">
			<div class="row justify-content-md-center" >
				<div class="col-xs-5 col-sm-2 col-md-2 col-lg-2">
					<input type="button"  value="LISTO" class="btn btn-light btn-sm rounded-pill btn-block" onclick="document.getElementById('salir').submit();">
				</div>
			</div>
		</div>
	</div>

	<form id="salir" action="/routes3/estadosFacturaProyecto/0" method="POST">
		<input type="hidden" name="fechaDesde" value="@desdeAAMMDD">
		<input type="hidden" name="fechaHasta" value="@hastaAAMMDD">
		<input type="hidden" name="uf" value="@uf">
		<input type="hidden" name="usd" value="@usd">
		<input type="hidden" name="eur" value="@eur">
	</form>

}




<script type="text/javascript">
	$(document).ready(function() {
		  $('#tablaPrincipal').DataTable({
				"fixedHeader": true,
				"lengthMenu": [[-1, 50, 100, 200], ["All", 50, 100, 200]],
				"language": {
					"url": "https://cdn.datatables.net/plug-ins/1.13.7/i18n/es-ES.json"
				}
		  } );

		document.getElementById('mostrarmostrar').style.display="block";

		let totalCant = 0;
		$(".cant:visible").each(function () {
			totalCant += parseFloat($(this).text().replace(/,/g, '') || 0);
		});
		$("#totalCant").text(formatStandar(totalCant,"@nroDec"));

		let totalGranTotal = 0;
		$(".total:visible").each(function () {
			totalGranTotal += parseFloat($(this).text().replace(/,/g, '') || 0);
		});
		$("#granTotal").text(formatStandar(totalGranTotal,"@nroDec"));


	});


</script>


		
		
	
