@(mapDiccionario: Map[String,String], mapPermiso: Map[String,String], userMnu: utilities.UserMnu, idTipoUsuario: String,
inicioPer: List[List[String]],guiasPer: List[List[String]],
fechas: List[String],
bodega: tables.BodegaEmpresa, proyecto: tables.Proyecto, tasaCambio: List[Double],
resumenSubtotales: List[List[String]], id_bodegaEmpresa: Long, finalPer: List[List[String]], cliente: tables.Cliente,
detalleAjuste: List[List[String]],
mapReportPorGuia10: Map[String,List[List[String]]], cantDec: Long, listReferencias: List[tables.TipoReferencia],
oc: String, listSol: List[tables.CotizaSolucion])

	<!-- ANCLA CABECERAS DE TABLAS -->
	<style type="text/css"> 
        thead tr th { 
            position: sticky;
            top: 0;
        }
    </style>



	
	
	<form id="formProforma" class="formulario" method="post" action="/generarProformaPdfXlsxXmlJson/">
	
			@if(mapPermiso.get("parametro.proformaListar-llenarApiRelBase")!=null && mapPermiso.get("parametro.proformaListar-llenarApiRelBase").equals("1") && mapPermiso.get("enviarApiFactura")!=null){
				<div id="modalAdicRelBase" class="modal" data-backdrop="static" data-keyboard="false">
				   	<div class='modal-dialog modal-dialog-scrollable' style="min-width: 60%;" role='document'>
					   	<div class='modal-content'>
							<div class='modal-header'>
								<h5 class="modal-title">CONCEPTO, DESCRIPCION Y OBSERVACIONES</h5>
							</div>
							<div class="modal-body">
								<table id="tablaSoluciones" class="table table-sm table-hover table-bordered table-condensed table-fluid">
										<thead style="background-color: #eeeeee">
											<TR> 
												<th style="width:40%; white-space: nowrap;">
													CONCEPTO<br>
													<select class="form-control form-control-sm" name="id_cotizaSolucion">
														@for(lista <- listSol){
															<option value="@lista.getId()">@lista.getSolucion()</option>
														}
													</select>
												</th>
												<th>
													DESCRIPCION <textarea class="form-control form-control-sm"
																	rows="2"
																	name="sol_description"
																	autocomplete="off"> </textarea>
												</th>
											</TR>
											<TR> 
												<th colspan="2" >
													OBSERVACIONES <textarea class="form-control form-control-sm"
																	rows="8"
																	name="sol_observaciones"
																	autocomplete="off">@Html("PERIODO: de "+fechas.get(2)+" a "+fechas.get(3))</textarea>
												</th>
											</TR>
										</thead>
									</table>
								<div align="center">
									<button class='btn btn-sm btn-success' style='font-size: 10px;' data-dismiss='modal' onclick="document.getElementById('formProforma').submit()">
										GENERAR @mapDiccionario.get("PROFORMA")
									</button>
									<button type='button' class='btn btn-sm btn-light' style='font-size: 10px;' data-dismiss='modal'>Cancelar</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			}
	
		<input type="hidden" name="idBodega" value="@bodega.id">
		<input type="hidden" name="fechaDesde" value="@fechas.get(0)">
		<input type="hidden" name="fechaHasta" value="@fechas.get(1)">
		<input type="hidden" name="uf" value="@tasaCambio.get(0)">
		<input type="hidden" name="usd" value="@tasaCambio.get(1)">
		<input type="hidden" name="eur" value="@tasaCambio.get(2)">
		<input type="hidden" id="esVenta" name="esVenta">
		<div id='modalAgregaReferencias' class='modal' role='dialog' data-backdrop='static' data-keyboard='false'>
			<div class='modal-dialog modal-dialog-scrollable' style="max-width: 50% !important;" role='document'>
			   	<div class='modal-content'>
					<div class='modal-header'>
						<h5 class='modal-title'>REFERENCIAS</h5>
						<div align="right">
							@if(mapPermiso.get("parametro.proformaListar-llenarApiRelBase")!=null && mapPermiso.get("parametro.proformaListar-llenarApiRelBase").equals("1") && mapPermiso.get("enviarApiFactura")!=null){
								<button class='btn btn-sm btn-success' style='font-size: 10px;' data-dismiss='modal' 
									onclick="$('#modalAdicRelBase').modal('show');">
									GENERAR @mapDiccionario.get("PROFORMA")
								</button>
							}else{
								<button class='btn btn-sm btn-success' style='font-size: 10px;' data-dismiss='modal' onclick="document.getElementById('formProforma').submit()">
									GENERAR @mapDiccionario.get("PROFORMA")
								</button>
							}
							
					        <button type='button' class='close' data-dismiss='modal' aria-label='Close' 
									onclick='document.getElementById("btnArr").disabled=false; document.getElementById("btnVta").disabled=false;'>
					          	<span aria-hidden='true'>&times;</span>
					        </button>
						</div>
					</div>
				    <div class="modal-body">
						<table id="referencia" class="table table-hover table-sm table-condensed table-bordered table-fluid">
						 	<tr>
						 		<td colspan="4">REFERENCIAS:</td>
						 		<td colspan="2">
						 			<div align="right">
						 				<a type="button"  class="btn btn-sm btn-info" style='font-size: 10px;' onclick="agregarReferencia()">agregar referencia</a>
						 			</div>
						 		</td>
						 	</tr>
						 	<tr>
						 		<td>NroLinRef</td>
						 		<td>TpoDocRef</td>
						 		<td>FolioRef</td>
						 		<td>FchRef</td>
						 		<td>RazonRef</td>
						 		<td width="5%">del</td>
						 	</tr>
					 	</table>
					<br>
						@if(mapPermiso.get("parametro.proformaListar-llenarWebIConstruye")!=null && mapPermiso.get("parametro.proformaListar-llenarWebIConstruye").equals("1")){
							<div class="mb-3">
							  <label for="comentarios" class="form-label">COMENTARIOS:</label>
							  <textarea class="form-control" id="comentarios" rows="2"
												name="comentarios" 
		  										autocomplete="off"></textarea>
							</div>
						}else{
							<input type="text" name="comentarios" value="" style="display: none">
						}
				   	</div>
			   	</div>
			</div>
		</div>
	</form>
	
	<script>
	
			let validarCliente = (id_cliente) =>{
				if(id_cliente=="0"){
						let msg = "ERROR 1: El RUT del cliente no existe en RELBASE o no esta asociado el cliente al proyecto.<br>"
							+"No se puede generar la proforma, antes debe corregir";
			    		alertify.alert(msg, function () {});
				}else{
					var formData = new FormData();
					formData.append('id_cliente', id_cliente);
					$.ajax({
						url: "/validarClienteAjax/",
			            type: "POST",
			            method: "POST",
			            data: formData,
			            cache: false,
			            contentType: false,
				     	processData: false,
				     	success: function(rs){
				     		if(rs=="0"){
								let msg = "ERROR 2: El RUT del cliente no existe en RELBASE o no esta asociado el cliente al proyecto.<br>"
									+"No se puede generar la proforma, antes debe corregir";
					    		alertify.alert(msg, function () {});
							}else{
								 $('#modalAgregaReferencias').modal('show');
							}
				     	}
			        });
				}
				
			}
			
				

		 	let eliminaReferencia = (nodo) =>{
		 			nodo.parentNode.parentNode.remove();
		 			let tabla = document.getElementById('referencia');
		 			for (let i = 2; i < tabla.rows.length; i++){
		 				let cellsOfRow = tabla.rows[i].getElementsByTagName('td');
		 				cellsOfRow[0].innerHTML=i-1;
		 			}
		 	}
	 		let agregarReferencia = () =>{
	 			let tabla = document.getElementById('referencia');
				let row = tabla.insertRow(tabla.rows.length);
				let cell = row.insertCell(0);
				let indice = tabla.rows.length-2;
				cell.innerHTML=indice+"<input type='hidden' name='nroLinRef[]' value='"+indice+"'>";
				cell = row.insertCell(1);
				let listado = "<select  name='tpoDocRef[]'>";
				@for(referencia <- listReferencias){
					listado = listado + "<option value='@referencia.codigo'>@referencia.concepto</option>";
				}
				listado = listado + "</select>";
				cell.innerHTML=listado;
				cell=row.insertCell(2);
				cell.innerHTML="<input type='text' name='folioRef[]' value=''>";
				cell=row.insertCell(3);
				cell.innerHTML="<input type='date' name='fchRef[]' value=''>";
				cell=row.insertCell(4);
				cell.innerHTML="<input type='text' name='razonRef[]' value=''>";
				cell=row.insertCell(5);
				cell.innerHTML="<a class='btn btn-mini btn-danger' onclick='eliminaReferencia(this)'>X</a>";
	 		}
	</script>

	
	@main("") {

		@menues(mapDiccionario, mapPermiso, userMnu, " ")
		
		@modalEquipoDescripcion()
		@modalVerCotizacion()
		
		<div id="mostrarmostrar" style="display:none;">
			@barraTitulo(mapDiccionario, "DETALLE EP/FACTURA PROFORMA " + mapDiccionario.get("BODEGA") + "/PROYECTO: " + bodega.getNombre(),
				"PERIODO: desde " + fechas.get(2) +" --- hasta: " +  fechas.get(3))
				
			<div class="noprint">
				<table class="table table-sm table-condensed table-fluid">
					<tr>
						<td width="25%">
							<div class="input-group">
						  		<div class="input-group-prepend">
						    		<span class="input-group-text" id="basic-addon1">BUSCAR</span>
						  		</div>
						  		<input type="text" class="form-control left"
									id="searchTermtablaPrincipal"
									onkeyup="doSearch3('tablaPrincipal');">
							</div>
						</td>
						<td>
							<div align="center">
								<button type="button"  class="btn btn-sm btn-success" onclick="document.getElementById('excel').submit()">
									Exportar a Excel
								</button>
								<button type="button" class="btn btn-sm btn-success" tabindex="-1" onclick="window.print(); return false;" >
									Imprimir
								</button>
								<button type="button"  class="btn btn-sm btn-success" 
									onclick="history.go(-1);return false;">
									Volver
								</button>
							</div>
						</td>
						<td width="25%">
							@if(!idTipoUsuario.equals("7")){
								<div align="right">
											HACER @mapDiccionario.get("PROFORMA"): 
										<button id="btnArr" type="button" class="btn btn-mini btn-info" tabindex="-1" 
											onclick=" this.disabled = true;
												if(parseFloat(numero.formatBack($('#resumenTotal12').text()))>0){
													$('#esVenta').val('0');
													@if(mapPermiso.get("parametro.proformaListar-llenarApiRelBase")!=null && mapPermiso.get("parametro.proformaListar-llenarApiRelBase").equals("1") && mapPermiso.get("enviarApiFactura")!=null){
														validarCliente('@cliente.id');
													}else{
														$('#modalAgregaReferencias').modal('show');
													}
												}else{
													alertify.alert('No hay valor de alquiler a emitir', function () {});
												}">
											DE @mapDiccionario.get("ARRIENDO")
										</button>
										
										
										<button id="btnVta" type="button" class="btn btn-mini btn-info" tabindex="-1" 
											onclick=" this.disabled = true;
											if(parseFloat(numero.formatBack($('#resumenTotal22').text()))>0){
												$('#esVenta').val('1');
												@if(mapPermiso.get("parametro.proformaListar-llenarApiRelBase")!=null && mapPermiso.get("parametro.proformaListar-llenarApiRelBase").equals("1") && mapPermiso.get("enviarApiFactura")!=null){
													validarCliente('@cliente.id');
												}else{
													$('#modalAgregaReferencias').modal('show');
												}
											}else{
												alertify.alert('No hay valor de venta a emitir', function () {});
											}">
											DE VENTA
										</button>
								</div>
							}
						</td>
					</tr>
				</table>
			</div>
			
			<form id="excel" class="formulario" method="post" action="/reportFacturaProyectoDetExcel/">
				<input type="hidden" name="fechaDesde" value="@fechas.get(0)">
				<input type="hidden" name="fechaHasta" value="@fechas.get(1)">
				<input type="hidden" name="uf" value="@tasaCambio.get(0)">
				<input type="hidden" name="usd" value="@tasaCambio.get(1)">
				<input type="hidden" name="eur" value="@tasaCambio.get(2)">
				<input type="hidden" name="id_bodega" value="@bodega.getId()">
			</form>
		

			
			<input type="hidden" id="TA">
			<input type="hidden" id="TV">
			<input type="hidden" id="TCFI">
			
			<table class="table table-sm table-bordered table-condensed table-fluid">
					 <TR> 
						<td width="44%" colspan="3" style= "text-align: left; vertical-align:top;">
							<table class="table table-sm table-hover table-bordered table-condensed table-fluid">
								@if(!cliente.rut.equals(null)){
									<tr style= "background-color: #F2F5A9;">
										<th style="text-align:left;">CLIENTE</th>
										<th style="text-align:left;">@cliente.rut -- @cliente.nombre</th>
									</tr>
								}
								<tr style= "background-color: #F2F5A9;">
									<th style="text-align:left;">@mapDiccionario.get("BODEGA")</th>
									<TH style="text-align:left;">@bodega.nombre.toUpperCase()</TH>
								</tr>
								<tr style= "background-color: #F2F5A9;">
									<th style="text-align:left;">PROYECTO</th>
									<th style="text-align:left;">@proyecto.nickName.toUpperCase()</TH>
								</tr>
								<tr style= "background-color: #F2F5A9;">
									<th style="text-align:left;">PERIODO</th>
									<th style="text-align:left;">desde @fechas.get(2) hasta @fechas.get(3)</TH>
								</tr>
								<tr style= "background-color: #F2F5A9;">
									<th style="text-align:left;">COMERCIAL</th>
									<th style="text-align:left;">@bodega.comercial</TH>
								</tr>
							</table>
							<table class="table table-sm table-hover table-bordered table-condensed table-fluid">
								<tr>
									<th  width="55%" style= "text-align: center;">CONCEPTO</th>
									<th  width="15%" style= "text-align: center;">CFI</th>
									<th  width="15%" style= "text-align: center;">@mapDiccionario.get("ARRIENDO")</th>
									<th  width="15%" style= "text-align: center;">VENTA</th>
								</tr>
								
								<tr>
									<td style= "text-align: left;">Inventario Inicial:</td>
									<td id="inicialCfi" style= "text-align: right;"></td>
									<td id="inicialArriendo" style= "text-align: right;"></td>
									<td id="inicialVenta" style= "text-align: right;"></td>
								</tr>
								<tr>
									<td style= "text-align: left;">Mas Despachos:</td>
									<td id="despachoCfi" style= "text-align: right;"></td>
									<td id="despachoArriendo" style= "text-align: right;"></td>
									<td id="despachoVenta" style= "text-align: right;"></td>
								</tr>
								<tr>
									<td style= "text-align: left;">Menos Devoluciones:</td>
									<td id="devolucionCfi" style= "text-align: right;"></td>
									<td id="devolucionArriendo" style= "text-align: right;"></td>
									<td id="devolucionVenta" style= "text-align: right;"></td>
								</tr>
								<tr>
									<th style= "text-align: left;">SUBTOTAL:</th>
									<th id="totCfi" style= "text-align: right;"></th>
									<th id="totArriendo" style= "text-align: right;"></th>
									<th id="totVenta" style= "text-align: right;"></th>
								</tr>
								
								@for(lista <- detalleAjuste){
									<tr>
										<td style= "text-align: left;">@lista.get(0)</td>
										<td style= "text-align: right;">0</td>
										<td style= "text-align: right;">@lista.get(1)</td>
										<td style= "text-align: right;">@lista.get(2)</td>
									<tr>
								}
								
								<tr>
									<th style= "text-align: left;">TOTAL:</th>
									<th id="totCfi2" style= "text-align: right;"></th>
									<th id="totArriendo2" style= "text-align: right;"></th>
									<th id="totVenta2" style= "text-align: right;"></th>
								</tr>
							</table>
						</td>
						<td width="2%">&nbsp;</td>
						<td width="44%" colspan="7" style= "text-align: left;">
							<table class="table table-sm table-hover table-bordered table-condensed table-fluid">
								<tr>
									<th colspan="2">TOTAL NETO (CFI + @mapDiccionario.get("ARRIENDO") + VENTA NETO + AJUSTES)</th>
									<th style="text-align:right;" colspan="2"><div id="resumenTotal3"></div></th>
								</tr>
							</table>
							<table id="resumen" class="table table-sm table-hover table-bordered table-condensed table-fluid">
								<tr>
									<th width="55%"></th>
									<th width="15%" style="text-align:center;">CFI</th>
									<th width="15%" style="text-align:center;">@mapDiccionario.get("ARRIENDO")</th>
									<th width="15%" style="text-align:center;">VENTA</th>
								</tr>
								@for(subtotal <- resumenSubtotales){
									@if(!(subtotal.get(1).equals("0")&&subtotal.get(2).equals("0")&&subtotal.get(3).equals("0"))){
									<tr>
										<td style="text-align:left;">@subtotal.get(0).toUpperCase()</td>
										<td style="text-align:right;">@subtotal.get(3)</td>
										<td style="text-align:right;">@subtotal.get(1)</td>
										<td style="text-align:right;">@subtotal.get(2)</td>
									</tr>
									}
								}
								<tr>
									<th style="text-align:left;">SUBTOTAL</th>
									<th style="text-align:right;"><div id="resumenTotal0"></div></th>
									<th style="text-align:right;"><div id="resumenTotal1"></div></th>
									<th style="text-align:right;"><div id="resumenTotal2"></div></th>
								</tr>
							</table>
							<table class="table table-sm table-hover table-bordered table-condensed table-fluid">
								@for(lista <- detalleAjuste){
									<tr>
										<td style= "text-align: left;">@lista.get(0)</td>
										<td style= "text-align: right;">0</td>
										<td style= "text-align: right;">@lista.get(1)</td>
										<td style= "text-align: right;">@lista.get(2)</td>
									<tr>
								}
								
								<tr>
									<th  width="55%" style= "text-align: left;">TOTAL:</th>
									<th  width="15%" style="text-align:right;"><div id="resumenTotal02"></div></th>
									<th  width="15%" style="text-align:right;"><div id="resumenTotal12"></div></th>
									<th  width="15%" style="text-align:right;"><div id="resumenTotal22"></div></th>
								</tr>
								<tr>
									<td colspan="4" style= "text-align: left;">@oc<td>
								</tr>
							</table>
						</td>
					</TR>
			 </table>
		
			 <script>
			 	 var numero = new DecimalFormat("#,##0.00");
				 var totalInicial=0;
				 var totalDespachoCfi=0;
				 var totalDespachoArr=0;
				 var totalDespachoVta=0;
				 var totalDevolucionArr=0;
				 var totalDevolucionVta=0;
			 </script>
		
			  
				<table id="tablaPrincipal" class="table table-sm table-hover table-bordered table-condensed table-fluid" >
					<thead class="header">
			        	<TR> 
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">GRUPO</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">Nro.Coti</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">CODIGO</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">EQUIPO</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">UN</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">CANT</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">MON</TH>
							
							@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">P.Venta<br>sin dcto</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">Dcto</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">P.Venta<br>con Dcto</TH>
							}else{
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">Precio<br>Venta</TH>
							}
							
							@if(!mapPermiso.get("parametro.proforma_ocultaTasaArriendo").equals("1")){
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">Tasa Mes<br>@mapDiccionario.get("Arr")</TH>
							}
							
							@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">P.@mapDiccionario.get("ARR") DIA<br>sin dcto</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">Dcto</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">P.@mapDiccionario.get("ARR") DIA<br>con Dcto</TH>
							}else{
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">P.@mapDiccionario.get("ARR")<br>por DIA</TH>
							}
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">CANT<br>DIAS</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">TASA<br>CAMBIO</TH>
							
							@if(mapDiccionario.get("nEmpresa").equals("EMIN") && tasaCambio.get(0).toString().equals("1")){
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">CFI<br>en UF</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">@mapDiccionario.get("ARRIENDO")<br>en UF</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">VENTA<br>en UF</TH>
							}else{
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">CFI<br>en @mapDiccionario.get("PESOS")</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">@mapDiccionario.get("ARRIENDO")<br>en @mapDiccionario.get("PESOS")</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">VENTA<br>en @mapDiccionario.get("PESOS")</TH>
							}
							
							
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;" title="Corresponde a la fecha del primer despacho de equipo por la cotizacion">DESDE<br>FECHA</TH>
						</TR>
					</thead>
					<tbody>
						<TR >
							<td style="background-color: #9FF781" colspan="20">INVENTARIO INICIAL</td>
						</tr>
						@for((inicial,index) <- inicioPer.zipWithIndex){
							<tr>
								<td style="text-align: left;">@inicial.get(7)</td>
								
								@if(inicial.get(8).equals("0") || inicial.get(8).equals("")){
									<td style="text-align: center;">--</td>
								}else{
									<td style="text-align: center;"><a href="#" onclick="buscaCotizacion('@inicial.get(8)')">@inicial.get(8)</td>
								}
								
								<td style="text-align: left;"><a href="#" onclick="buscaEquipo('@inicial.get(9)');">@inicial.get(9)</a></td>
								<td style="text-align: left;"><a href="#" onclick="buscaEquipo('@inicial.get(9)');">@inicial.get(10)</a></td>
								
								<td style="text-align: center;">@inicial.get(11)</td>
								<td style="text-align: right;">@inicial.get(12)</td>
								<td style="text-align: center;">@inicial.get(13)</td>
								@if(inicial.get(19).trim().equals("0") && mapDiccionario.get("nEmpresa").equals("SANTAFE")){
									<td style="text-align: right;"></td>
									<td style="text-align: right;"></td>
								}else{
									@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
										<td style="text-align: right;">
											<div id="dctoVenta@index"></div>
											<script>
												var auxVta = numero.formatBack("@inicial.get(14)");
												var dcto = "@inicial.get(25)";
												var auxDcto = numero.formatBack(dcto.replace("%","").trim());
												if(auxDcto>0){
													var rs = formatStandar4(parseFloat(auxVta)/(1-parseFloat(auxDcto)/100));
													document.getElementById('dctoVenta@index').innerHTML=rs;
												}else{
													var rs = formatStandar4(parseFloat(auxVta));
													document.getElementById('dctoVenta@index').innerHTML=rs;
												}
											</script>
										</td>
										<td style="text-align: right;">@inicial.get(25)</td>
									}
									<td style="text-align: right;">@inicial.get(14)</td>
									@if(!mapPermiso.get("parametro.proforma_ocultaTasaArriendo").equals("1")){
										<td style="text-align: right;">
											<div id="inicio@index"></div>
											<script>
												var auxVta = numero.formatBack("@inicial.get(14)");
												var auxArr = numero.formatBack("@inicial.get(15)");
												if(auxVta==0){
													document.getElementById('inicio@index').innerHTML="";
												}else{
													var rs = formatStandar2(parseFloat(auxArr)*30*100/parseFloat(auxVta))+"%";
													document.getElementById('inicio@index').innerHTML=rs;
												}
												
											</script>
										</td>
									}
								}
								@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
									<td style="text-align: right;">
										<div id="dctoArr@index"></div>
										<script>
											var auxArr = numero.formatBack("@inicial.get(15)");
											var dcto = "@inicial.get(24)";
											var auxDcto = numero.formatBack(dcto.replace("%","").trim());
											if(auxDcto>0){
												var rs = formatStandar4(parseFloat(auxArr)/(1-parseFloat(auxDcto)/100));
												document.getElementById('dctoArr@index').innerHTML=rs;
											}else{
												var rs = formatStandar4(parseFloat(auxArr));
												document.getElementById('dctoArr@index').innerHTML=rs;
											}
										</script>
									</td>
									<td style="text-align: right;">@inicial.get(24)</td>
								}
								<td style="text-align: right;">@inicial.get(15)</td>
								<td style="text-align: center;">@inicial.get(16)</td>
								<td style="text-align: right;">@inicial.get(17)</td>
								<td style="text-align: right;">@inicial.get(23)</td>
								<td style="text-align: right;">
									@inicial.get(18)
									<script>
										totalInicial = totalInicial + parseFloat(numero.formatBack("@inicial.get(18)"));
									</script>
								</td>
								<td style="text-align: right;">@inicial.get(19)</td>
								<td style="text-align: center;">@inicial.get(21).replaceAll("-", "/")</td>
							</TR>
			 			}
			 			<TR >
							<td style="background-color: #9FF781" colspan="20">DETALLE MOVIMIENTOS DEL MES</td>
						</tr>
			 			@for((detalle1,index2) <- guiasPer.zipWithIndex){
								<TR>
								<td colspan="3" style="background-color: #eeeeee">@detalle1.get(7): @detalle1.get(2)</td>
								<td colspan="1" style="background-color: #eeeeee">FECHA: @mapDiccionario.get("GUIA"): @detalle1.get(3) --  INI/TER: @detalle1.get(10)</td>
								<td colspan="4" style="background-color: #eeeeee">Nro de Ref: @detalle1.get(5)</td>
								<td colspan="16" style="background-color: #eeeeee">Observaciones: @detalle1.get(9)</td>
								</tr>
								@if(mapReportPorGuia10.get(detalle1.get(8))!=null){
									@for((detalle3,index) <- mapReportPorGuia10.get(detalle1.get(8)).zipWithIndex){
										@if(!(detalle3.get(13).equals("0") || detalle3.get(13).equals("-0"))){
											<tr>
												<td style="text-align: left;">@detalle3.get(8)</td>
												
												
												@if(detalle3.get(9).equals("0") || detalle3.get(9).equals("")){
													<td style="text-align: center;">--</td>
												}else{
													<td style="text-align: center;"><a href="#" onclick="buscaCotizacion('@detalle3.get(9)')">@detalle3.get(9)</td>
												}
												
												<td style="text-align: left;"><a href="#" onclick="buscaEquipo('@detalle3.get(10)');">@detalle3.get(10)</a></td>
												<td style="text-align: left;"><a href="#" onclick="buscaEquipo('@detalle3.get(10)');">@detalle3.get(11)</a></td>
								
												<td style="text-align: center;">@detalle3.get(12)</td>
												<td style="text-align: right;">@detalle3.get(13)</td>
												<td style="text-align: center;">@detalle3.get(14)</td>
												@if(detalle3.get(20).trim().equals("0") && mapDiccionario.get("nEmpresa").equals("SANTAFE")){
													<td style="text-align: right;"></td>
													<td style="text-align: right;"></td>
												}else{
													@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
														<td style="text-align: right;">
															<div id="dctoVenta@index @index2"></div>
															<script>
																var auxVta = numero.formatBack("@detalle3.get(15)");
																var dcto = "@detalle3.get(25)";
																var auxDcto = numero.formatBack(dcto.replace("%","").trim());
																if(auxDcto>0){
																	var rs = formatStandar4(parseFloat(auxVta)/(1-parseFloat(auxDcto)/100));
																	document.getElementById('dctoVenta@index @index2').innerHTML=rs;
																}else{
																	var rs = formatStandar4(parseFloat(auxVta));
																	document.getElementById('dctoVenta@index @index2').innerHTML=rs;
																}
															</script>
														</td>
														<td style="text-align: right;">@detalle3.get(25)</td>
													}
													<td style="text-align: right;">@detalle3.get(15)</td>
													@if(!mapPermiso.get("parametro.proforma_ocultaTasaArriendo").equals("1")){
														<td style="text-align: right;">
															<div id="guiasPer@index @index2"></div>
															<script>
																var auxVta = numero.formatBack("@detalle3.get(15)");
																var auxArr = numero.formatBack("@detalle3.get(16)");
																if(auxVta==0){
																	document.getElementById('guiasPer@index @index2').innerHTML="";
																}else{
																	var rs = formatStandar2(parseFloat(auxArr)*30*100/parseFloat(auxVta))+"%";
																	document.getElementById('guiasPer@index @index2').innerHTML=rs;
																}
																
															</script>
														</td>
													}
												}
												@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
													<td style="text-align: right;">
														<div id="dctoArr@index @index2"></div>
														<script>
															var auxArr = numero.formatBack("@detalle3.get(16)");
															var dcto = "@detalle3.get(24)";
															var auxDcto = numero.formatBack(dcto.replace("%","").trim());
															if(auxDcto>0){
																var rs = formatStandar4(parseFloat(auxArr)/(1-parseFloat(auxDcto)/100));
																document.getElementById('dctoArr@index @index2').innerHTML=rs;
															}else{
																var rs = formatStandar4(parseFloat(auxArr));
																document.getElementById('dctoArr@index @index2').innerHTML=rs;
															}
														</script>
													</td>
													<td style="text-align: right;">@detalle3.get(24)</td>
												}
												<td style="text-align: right;">@detalle3.get(16)</td>
												<td style="text-align: right;">@detalle3.get(17)</td>
												<td style="text-align: right;">@detalle3.get(18)</td>
												<td style="text-align: right;">
													@detalle3.get(23)
													<script>
														if(parseFloat(numero.formatBack("@detalle3.get(23)"))>0){
																totalDespachoCfi = totalDespachoCfi + parseFloat(numero.formatBack("@detalle3.get(23)"));
														}
													</script>
												</td>
												<td style="text-align: right;">
													@detalle3.get(19)
													<script>
														if(parseFloat(numero.formatBack("@detalle3.get(19)"))>0){
															totalDespachoArr = totalDespachoArr + parseFloat(numero.formatBack("@detalle3.get(19)"));
														}else{
															totalDevolucionArr = totalDevolucionArr + parseFloat(numero.formatBack("@detalle3.get(19)"));
														}
													</script>
												</td>
												<td style="text-align: right;">
													@detalle3.get(20)
													<script>
														if(parseFloat(numero.formatBack("@detalle3.get(20)"))>0){
															totalDespachoVta = totalDespachoVta + parseFloat(numero.formatBack("@detalle3.get(20)"));
														}else{
															totalDevolucionVta = totalDevolucionVta + parseFloat(numero.formatBack("@detalle3.get(20)"));
														}
													</script>
												</td>
												<td style="text-align: center;"></td>
											</TR>
											
										}
									}
								}
			 			}
			 			<TR style="background-color: #FFFF00">
							<td style="background-color: #FFFF00" colspan="12">TOTALES NETO</td>
							@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
								<td style="background-color: #FFFF00"></td>
								<td style="background-color: #FFFF00"></td>
								<td style="background-color: #FFFF00"></td>
							}
							<td style="background-color: #FFFF00"><div align="right" id="total0"></div></td>
							<td style="background-color: #FFFF00"><div align="right" id="total1"></div></td>
							<td style="background-color: #FFFF00"><div align="right" id="total2"></div></td>
							<td style="background-color: #FFFF00"></td>
						</tr>
						<TR style="background-color: #FFFF00">
							<td style="text-align:right;background-color: #FFFF00" colspan="14">TOTAL @mapDiccionario.get("ARRIENDO") + VENTA NETO:</td>
							@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
								<td style="background-color: #FFFF00"></td>
								<td style="background-color: #FFFF00"></td>
								<td style="background-color: #FFFF00"></td>
							}
							<td style="background-color: #FFFF00"><div align="right" id="total3"></div></td>
							<td style="background-color: #FFFF00"></td>
						</tr>
						@if(mapDiccionario.get("nEmpresa").equals("GYL")){
							<TR style="background-color: #FFFF00">
								<td style="text-align:center" colspan="3"><br><br>V째B째 MAQUINARIAS</td>
								<td style="text-align:center" colspan="25"><br><br>V째B째 GERENCIA</td>
							</tr>
						}
					</tbody>
				</table>
				
				
				
				<BR>
				<h3><B>INVENTARIO FINAL DEL PROYECTO</B></h3>
				<table id="tablaPrincipal" class="table table-sm table-hover table-bordered table-condensed table-fluid">
					<thead class="header">
			        	<TR> 
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">GRUPO</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">Nro.Coti</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">CODIGO</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">EQUIPO</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">UN</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">CANT</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">MON</TH>
							@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">P.Venta<br>sin dcto</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">Dcto</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">P.Venta<br>con Dcto</TH>
							}else{
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">Precio<br>Venta</TH>
							}
							@if(!mapPermiso.get("parametro.proforma_ocultaTasaArriendo").equals("1")){
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">Tasa Mes<br>Arr</TH>
							}
							@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">P.ARR DIA<br>sin dcto</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">Dcto</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">P.ARR DIA<br>con Dcto</TH>
							}else{
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">ARR<br>por DIA</TH>
							}
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">CANT<br>DIAS</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">TASA<br>CAMBIO</TH>
							@if(mapDiccionario.get("nEmpresa").equals("EMIN") && tasaCambio.get(0).equals("1")){
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">@mapDiccionario.get("ARRIENDO")<br>en UF</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">VENTA<br>en UF</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">DESDE<br>FECHA</TH>
							}else{
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">@mapDiccionario.get("ARRIENDO")<br>en @mapDiccionario.get("PESOS")</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">VENTA<br>en @mapDiccionario.get("PESOS")</TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;" title="Corresponde a la fecha del primer despacho de equipo por la cotizacion">DESDE<br>FECHA</TH>
							}
							
						</TR>
					</thead>
					<tbody>
						<TR >
							<td style="background-color: #9FF781" colspan="20">INVENTARIO FINAL</td>
						</tr>
						@for((inicial,index) <- finalPer.zipWithIndex){
							<tr>
								<td style="text-align: left;">@inicial.get(7)</td>
								
								@if(inicial.get(8).equals("0") || inicial.get(8).equals("")){
									<td style="text-align: center;">--</td>
								}else{
									<td style="text-align: center;"><a href="#" onclick="buscaCotizacion('@inicial.get(8)')">@inicial.get(8)</td>
								}
								
								<td style="text-align: left;"><a href="#" onclick="buscaEquipo('@inicial.get(9)');">@inicial.get(9)</a></td>
								<td style="text-align: left;"><a href="#" onclick="buscaEquipo('@inicial.get(9)');">@inicial.get(10)</a></td>
								
								<td style="text-align: center;">@inicial.get(11)</td>
								<td class="cantInvFin" style="text-align: right;">@inicial.get(12)</td>
								<td style="text-align: center;">@inicial.get(13)</td>
								@if(inicial.get(19).trim().equals("0") && mapDiccionario.get("nEmpresa").equals("SANTAFE")){
									<td style="text-align: right;"></td>
									<td style="text-align: right;"></td>
								}else{
									@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
										<td style="text-align: right;">
											<div id="finaldctoVenta@index"></div>
											<script>
												var auxVta = numero.formatBack("@inicial.get(14)");
												var dcto = "@inicial.get(25)";
												var auxDcto = numero.formatBack(dcto.replace("%","").trim());
												if(auxDcto>0){
													var rs = formatStandar4(parseFloat(auxVta)/(1-parseFloat(auxDcto)/100));
													document.getElementById('finaldctoVenta@index').innerHTML=rs;
												}else{
													var rs = formatStandar4(parseFloat(auxVta));
													document.getElementById('finaldctoVenta@index').innerHTML=rs;
												}
											</script>
										</td>
										<td style="text-align: right;">@inicial.get(25)</td>
									}
									<td class="pVentaInvFin" style="text-align: right;">@inicial.get(14)</td>
									@if(!mapPermiso.get("parametro.proforma_ocultaTasaArriendo").equals("1")){
										<td style="text-align: right;">
											<div id="finalPer@index"></div>
											<script>
												var auxVta = numero.formatBack("@inicial.get(14)");
												var auxArr = numero.formatBack("@inicial.get(15)");
												if(auxVta==0){
													document.getElementById('finalPer@index').innerHTML="";
												}else{
													var rs = formatStandar2(parseFloat(auxArr)*30*100/parseFloat(auxVta))+"%";
													document.getElementById('finalPer@index').innerHTML=rs;
												}
												
											</script>
										</td>
									}
								}
								@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
									<td style="text-align: right;">
										<div id="finaldctoArr@index"></div>
										<script>
											var auxArr = numero.formatBack("@inicial.get(15)");
											var dcto = "@inicial.get(24)";
											var auxDcto = numero.formatBack(dcto.replace("%","").trim());
											if(auxDcto>0){
												var rs = formatStandar4(parseFloat(auxArr)/(1-parseFloat(auxDcto)/100));
												document.getElementById('finaldctoArr@index').innerHTML=rs;
											}else{
												var rs = formatStandar4(parseFloat(auxArr));
												document.getElementById('finaldctoArr@index').innerHTML=rs;
											}
										</script>
									</td>
									<td style="text-align: right;">@inicial.get(24)</td>
								}
								<td class="pArrDiaInvFin" style="text-align: right;">@inicial.get(15)</td>
								<td style="text-align: right;">@inicial.get(16)</td>
								<td style="text-align: right;">@inicial.get(17)</td>
								<td style="text-align: right;">@inicial.get(18)</td>
								<td style="text-align: right;">0</td>
								<td style="text-align: center;">@inicial.get(21).replaceAll("-", "/")</td>
							</TR>
			 			}
			 		</tbody>
					<tfoot>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">TOTAL CANT x PU</TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
							@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
								<TH id="totPvtaInvFin" style="text-align: right;vertical-align:top;background-color:#eeeeee;"></TH>
							}else{
								<TH id="totPvtaInvFin"  style="text-align: right;vertical-align:top;background-color:#eeeeee;"></TH>
							}
							@if(!mapPermiso.get("parametro.proforma_ocultaTasaArriendo").equals("1")){
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
							}
							@if(mapPermiso.get("parametro.proforma_conDctosCoti").equals("1")){
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
								<TH id="totParrDiaInvFin" style="text-align: right;vertical-align:top;background-color:#eeeeee;"></TH>
							}else{
								<TH id="totParrDiaInvFin" style="text-align: right;vertical-align:top;background-color:#eeeeee;"></TH>
							}
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
							<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
							@if(mapDiccionario.get("nEmpresa").equals("EMIN") && tasaCambio.get(0).equals("1")){
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
							}else{
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
								<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;"></TH>
							}
					</tfoot>
			 	</table>
			</div>
			</div>
			<div class="noprint">
				<form>
					<div align="center">
						<button type="button"  class="btn btn-sm btn-success" 
							onclick="history.go(-1);return false;">
							Volver
						</button>
					</div>
				</form>
			</div>
		</div>
		
		
		
		
		<script type="text/javascript">
			  $(document).ready(function () {
				
			            document.getElementById('mostrarmostrar').style.display="block"; 
				
			            var numero = new DecimalFormat("#,##0.00");
						
						var totCfi = parseFloat(totalDespachoCfi);
						var totArriendo = parseFloat(totalInicial)+parseFloat(totalDespachoArr)+parseFloat(totalDevolucionArr);
						var totVenta = parseFloat(totalDespachoVta)+parseFloat(totalDevolucionVta);
						
						var cantDec = "@cantDec";
						
						if(cantDec==0){
							document.getElementById('total0').innerHTML=formatStandar0(totCfi);
							document.getElementById('total1').innerHTML=formatStandar0(totArriendo);
							document.getElementById('total2').innerHTML=formatStandar0(totVenta);
							document.getElementById('total3').innerHTML=formatStandar0(totVenta+totArriendo+totCfi);
						}
						if(cantDec==2){
							document.getElementById('total0').innerHTML=formatStandar2(totCfi);
							document.getElementById('total1').innerHTML=formatStandar2(totArriendo);
							document.getElementById('total2').innerHTML=formatStandar2(totVenta);
							document.getElementById('total3').innerHTML=formatStandar2(totVenta+totArriendo+totCfi);
						}
						if(cantDec==4){
							document.getElementById('total0').innerHTML=formatStandar4(totCfi);
							document.getElementById('total1').innerHTML=formatStandar4(totArriendo);
							document.getElementById('total2').innerHTML=formatStandar4(totVenta);
							document.getElementById('total3').innerHTML=formatStandar4(totVenta+totArriendo+totCfi);
						}
						if(cantDec==6){
							document.getElementById('total0').innerHTML=formatStandar6(totCfi);
							document.getElementById('total1').innerHTML=formatStandar6(totArriendo);
							document.getElementById('total2').innerHTML=formatStandar6(totVenta);
							document.getElementById('total3').innerHTML=formatStandar6(totVenta+totArriendo+totCfi);
						}
						
						tabla = document.getElementById('resumen');
						celdasDeFila = "";
						var totalResumen0 = 0;
						var totalResumen1 = 0;
						var totalResumen2 = 0;
						var numero = new DecimalFormat("#,##0.00");
							for (var i=1;i<tabla.rows.length-1;i++){
								celdas = tabla.rows[i].getElementsByTagName('td');
								totalResumen0 = totalResumen0 + parseFloat(numero.formatBack(celdas[1].innerHTML));
								totalResumen1 = totalResumen1 + parseFloat(numero.formatBack(celdas[2].innerHTML));
								totalResumen2 = totalResumen2 + parseFloat(numero.formatBack(celdas[3].innerHTML));
							}
						document.getElementById('TCFI').value=totalResumen0;
						document.getElementById('TA').value=totalResumen1;
						document.getElementById('TV').value=totalResumen2;
						
						
						//Determina total de ajustes al ep
						var totAjusteArr = 0;
						var totAjusteVta = 0;
						
						
						@for(lista <- detalleAjuste){
							totAjusteArr = parseFloat(totAjusteArr) + parseFloat(numero.formatBack("@lista.get(1)"));
							totAjusteVta = parseFloat(totAjusteVta) + parseFloat(numero.formatBack("@lista.get(2)"));
						}
						
						var totArriendo2 = parseFloat(totArriendo)+parseFloat(totAjusteArr);
						var totVenta2 = parseFloat(totVenta)+parseFloat(totAjusteVta);
						
						if(cantDec==0){
							document.getElementById('resumenTotal0').innerHTML=formatStandar0(totCfi);
							document.getElementById('resumenTotal1').innerHTML=formatStandar0(totArriendo);
							document.getElementById('resumenTotal2').innerHTML=formatStandar0(totVenta);
							document.getElementById('resumenTotal3').innerHTML=formatStandar0(totCfi+totArriendo2+totVenta2);
							
							document.getElementById('inicialCfi').innerHTML=formatStandar0("0");
							document.getElementById('inicialArriendo').innerHTML=formatStandar0(totalInicial);
							document.getElementById('inicialVenta').innerHTML=formatStandar0("0");
							
							document.getElementById('despachoCfi').innerHTML=formatStandar0(totalDespachoCfi);
							document.getElementById('despachoArriendo').innerHTML=formatStandar0(totalDespachoArr);
							document.getElementById('despachoVenta').innerHTML=formatStandar0(totalDespachoVta);
							
							document.getElementById('devolucionCfi').innerHTML=formatStandar0("0");
							document.getElementById('devolucionArriendo').innerHTML=formatStandar0(totalDevolucionArr);
							document.getElementById('devolucionVenta').innerHTML=formatStandar0(totalDevolucionVta);
							
							document.getElementById('totCfi').innerHTML=formatStandar0(totCfi);
							document.getElementById('totArriendo').innerHTML=formatStandar0(totArriendo);
							document.getElementById('totVenta').innerHTML=formatStandar0(totVenta);
							
							document.getElementById('totCfi2').innerHTML=formatStandar0(totCfi);
							document.getElementById('totArriendo2').innerHTML=formatStandar0(totArriendo2);
							document.getElementById('totVenta2').innerHTML=formatStandar0(totVenta2);
							
							document.getElementById('resumenTotal02').innerHTML=formatStandar0(totCfi);
							document.getElementById('resumenTotal12').innerHTML=formatStandar0(totArriendo2);
							document.getElementById('resumenTotal22').innerHTML=formatStandar0(totVenta2);
						}
						
						if(cantDec==2){
							document.getElementById('resumenTotal0').innerHTML=formatStandar2(totCfi);
							document.getElementById('resumenTotal1').innerHTML=formatStandar2(totArriendo);
							document.getElementById('resumenTotal2').innerHTML=formatStandar2(totVenta);
							document.getElementById('resumenTotal3').innerHTML=formatStandar2(totCfi+totArriendo2+totVenta2);
							
							document.getElementById('inicialCfi').innerHTML=formatStandar2("0");
							document.getElementById('inicialArriendo').innerHTML=formatStandar2(totalInicial);
							document.getElementById('inicialVenta').innerHTML=formatStandar2("0");
							
							document.getElementById('despachoCfi').innerHTML=formatStandar2(totalDespachoCfi);
							document.getElementById('despachoArriendo').innerHTML=formatStandar2(totalDespachoArr);
							document.getElementById('despachoVenta').innerHTML=formatStandar2(totalDespachoVta);
							
							document.getElementById('devolucionCfi').innerHTML=formatStandar2("0");
							document.getElementById('devolucionArriendo').innerHTML=formatStandar2(totalDevolucionArr);
							document.getElementById('devolucionVenta').innerHTML=formatStandar2(totalDevolucionVta);
							
							document.getElementById('totCfi').innerHTML=formatStandar2(totCfi);
							document.getElementById('totArriendo').innerHTML=formatStandar2(totArriendo);
							document.getElementById('totVenta').innerHTML=formatStandar2(totVenta);
							
							document.getElementById('totCfi2').innerHTML=formatStandar2(totCfi);
							document.getElementById('totArriendo2').innerHTML=formatStandar2(totArriendo2);
							document.getElementById('totVenta2').innerHTML=formatStandar2(totVenta2);
							
							document.getElementById('resumenTotal02').innerHTML=formatStandar2(totCfi);
							document.getElementById('resumenTotal12').innerHTML=formatStandar2(totArriendo2);
							document.getElementById('resumenTotal22').innerHTML=formatStandar2(totVenta2);
						}
						
						if(cantDec==4){
							document.getElementById('resumenTotal0').innerHTML=formatStandar4(totCfi);
							document.getElementById('resumenTotal1').innerHTML=formatStandar4(totArriendo);
							document.getElementById('resumenTotal2').innerHTML=formatStandar4(totVenta);
							document.getElementById('resumenTotal3').innerHTML=formatStandar4(totCfi+totArriendo2+totVenta2);
							
							document.getElementById('inicialCfi').innerHTML=formatStandar4("0");
							document.getElementById('inicialArriendo').innerHTML=formatStandar4(totalInicial);
							document.getElementById('inicialVenta').innerHTML=formatStandar4("0");
							
							document.getElementById('despachoCfi').innerHTML=formatStandar4(totalDespachoCfi);
							document.getElementById('despachoArriendo').innerHTML=formatStandar4(totalDespachoArr);
							document.getElementById('despachoVenta').innerHTML=formatStandar4(totalDespachoVta);
							
							document.getElementById('devolucionCfi').innerHTML=formatStandar4("0");
							document.getElementById('devolucionArriendo').innerHTML=formatStandar4(totalDevolucionArr);
							document.getElementById('devolucionVenta').innerHTML=formatStandar4(totalDevolucionVta);
							
							document.getElementById('totCfi').innerHTML=formatStandar4(totCfi);
							document.getElementById('totArriendo').innerHTML=formatStandar4(totArriendo);
							document.getElementById('totVenta').innerHTML=formatStandar4(totVenta);
							
							document.getElementById('totCfi2').innerHTML=formatStandar4(totCfi);
							document.getElementById('totArriendo2').innerHTML=formatStandar4(totArriendo2);
							document.getElementById('totVenta2').innerHTML=formatStandar4(totVenta2);
							
							document.getElementById('resumenTotal02').innerHTML=formatStandar4(totCfi);
							document.getElementById('resumenTotal12').innerHTML=formatStandar4(totArriendo2);
							document.getElementById('resumenTotal22').innerHTML=formatStandar4(totVenta2);
						}
						
						if(cantDec==6){
							document.getElementById('resumenTotal0').innerHTML=formatStandar6(totCfi);
							document.getElementById('resumenTotal1').innerHTML=formatStandar6(totArriendo);
							document.getElementById('resumenTotal2').innerHTML=formatStandar6(totVenta);
							document.getElementById('resumenTotal3').innerHTML=formatStandar6(totCfi+totArriendo2+totVenta2);
							
							document.getElementById('inicialCfi').innerHTML=formatStandar6("0");
							document.getElementById('inicialArriendo').innerHTML=formatStandar6(totalInicial);
							document.getElementById('inicialVenta').innerHTML=formatStandar6("0");
							
							document.getElementById('despachoCfi').innerHTML=formatStandar6(totalDespachoCfi);
							document.getElementById('despachoArriendo').innerHTML=formatStandar6(totalDespachoArr);
							document.getElementById('despachoVenta').innerHTML=formatStandar6(totalDespachoVta);
							
							document.getElementById('devolucionCfi').innerHTML=formatStandar6("0");
							document.getElementById('devolucionArriendo').innerHTML=formatStandar6(totalDevolucionArr);
							document.getElementById('devolucionVenta').innerHTML=formatStandar6(totalDevolucionVta);
							
							document.getElementById('totCfi').innerHTML=formatStandar6(totCfi);
							document.getElementById('totArriendo').innerHTML=formatStandar6(totArriendo);
							document.getElementById('totVenta').innerHTML=formatStandar6(totVenta);
							
							document.getElementById('totCfi2').innerHTML=formatStandar6(totCfi);
							document.getElementById('totArriendo2').innerHTML=formatStandar6(totArriendo2);
							document.getElementById('totVenta2').innerHTML=formatStandar6(totVenta2);
							
							document.getElementById('resumenTotal02').innerHTML=formatStandar6(totCfi);
							document.getElementById('resumenTotal12').innerHTML=formatStandar6(totArriendo2);
							document.getElementById('resumenTotal22').innerHTML=formatStandar6(totVenta2);
						}
						
						
						
						
						
						let pArrDiaInvFin = document.querySelectorAll('.pArrDiaInvFin');
						let pVentaInvFin = document.querySelectorAll('.pVentaInvFin');
						let cantInvFin = document.querySelectorAll('.cantInvFin');
						
						let totVtaFin = 0;
						let totArrFin = 0;
						
						for (let i = 0; i < cantInvFin.length; i++) {
							let cantFin = cantInvFin[i].textContent.replace(/,/g,'');
							let pVtaFin = pVentaInvFin[i].textContent.replace(/,/g,'');
							let pArrFin = pArrDiaInvFin[i].textContent.replace(/,/g,'');
							
							totVtaFin += parseFloat(cantFin) * parseFloat(pVtaFin);
							totArrFin += parseFloat(cantFin) * parseFloat(pArrFin);
							
						}
						
						
						$("#totParrDiaInvFin").text(formatStandar(totArrFin, cantDec));
						$("#totPvtaInvFin").text(formatStandar(totVtaFin, cantDec));
						
			   });
				
				
				
				
			

		</script>
		

		
		
}
