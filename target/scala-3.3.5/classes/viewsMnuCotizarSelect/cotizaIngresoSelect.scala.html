@(mapDiccionario: Map[String,String], mapPermiso: Map[String,String], userMnu: utilities.UserMnu,
listEquipos: List[tables.Equipo])

    	
@main("") {

	@menues(mapDiccionario, mapPermiso, userMnu, " ")
	
	@modalEquipoDescripcion()
	
	<div id="mostrarmostrar" style="display:none;">
		@barraTitulo(mapDiccionario, "SELECCIONAR EQUIPOS A COTIZAR", "")
		<div class="row  justify-content-md-center">
			<div class="col-xs-8 col-sm-6 col-md-6 col-lg-6">
				<form method="post" action="/routes2/cotizaSeleccionados/" onsubmit="return validarForm();">
					<input type="hidden" id="seleccionados" name="seleccionados" value="">
					<table id="tablaPrincipal" class="table table-sm table-hover table-bordered table-condensed table-fluid">
						<thead style="background-color: #eeeeee">
							<TR> 
								<TH style="vertical-align: top;">GRUPO</TH>
								<TH>CODIGO</TH>
								<TH>EQUIPO</TH>
								<TH>STOCK</TH>
								<TH>SELECT</TH>
							</TR>
						</thead>
						<tbody>
							@for(lista1 <- listEquipos){
								<TR>
									<td style="text-align:left;">@lista1.getGrupo()</td>
									<td  style="text-align:left;">@lista1.getCodigo()</td>
									<td  style="text-align:left;">@lista1.getNombre()</td>
									<td style="text-align:center;">
										<div class="noprint">
											<a href="#" onclick="vistaStockPorEquipo('@lista1.getId()');" tabindex="-1">
												<kbd style="background-color: #73C6B6">stock</kbd>
											</a>
										</div>
									</td>
									<td  style="text-align:center;">
										<input type="checkbox" id="@lista1.getId()" value ="0" onchange="selecciona(id,value)"></td>
									</td>
								</TR>
				 			}
						</tbody>
					</table>
					<div class="noprint">
						<div class="row justify-content-md-center" >
							<div class="col-xs-5 col-sm-2 col-md-2 col-lg-2">
								<input type="button"  value="Cancelar" class="btn btn-light btn-sm rounded-pill btn-block" onclick="location.href='/home/';">
							</div>
							<div class="col-xs-5 col-sm-2 col-md-2 col-lg-2">
								<input type="submit" id="btnSubmit" value='SELECCIONAR' class="btn btn-primary btn-sm rounded-pill btn-block">
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
	
	<div id="modalStockPorEquipo" class="modal" role="dialog" data-backdrop="static" data-keyboard="false">
		<div class='modal-dialog modal-dialog-scrollable' style='max-width: 80% !important;' role='document'>
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">STOCK DISPONIBLE</h5>
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				          <span aria-hidden="true">&times;</span>
				        </button>
				</div>
				<div class="modal-body">
					<div id="stockPorEquipo"></div>
	   				<div class="row">
						<div class="col-sm-12" style="text-align:center">
							<button type="button" class="btn btn-sm  btn-warning" style="font-size: 10px;" data-dismiss="modal">Cancelar</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	
}


<script type="text/javascript">
	$(document).ready(function() {
		  $('#tablaPrincipal').DataTable({
		    	"fixedHeader": true,
		    	"lengthMenu": [[20, 50, 100, 200, -1], [20, 50, 100, 200, "All"]],
		    	"order": [[ 2, "asc" ]],
		    	"language": {
		        	"url": "https://cdn.datatables.net/plug-ins/1.13.7/i18n/es-ES.json"
		        }
		  } );
		  document.getElementById('mostrarmostrar').style.display="block";
	});
	
	const selecciona = (id_equipo, valor) => {
		if(valor == 0) {
			document.getElementById(id_equipo).value = "1";
			let aux = ""+$("#seleccionados").val()+id_equipo + ",";
			$("#seleccionados").val(aux);
		}else{
			document.getElementById(id_equipo).value = "0";
			let aux = ""+id_equipo + ",";
			$("#seleccionados").val($("#seleccionados").val().replace(aux,""));
		}
		
	}
	
	const vistaStockPorEquipo = (id_equipo) =>{
		var formData = new FormData();
		formData.append('id_equipo',id_equipo);
        $.ajax({
            url: "/tablaInvPorEquipoAjax/",
            type: "POST",
            method: "POST",
            data: formData,
            cache: false,
            contentType: false,
	     	processData: false,
	     	success: function(respuesta){
				document.getElementById('stockPorEquipo').innerHTML = respuesta;
				$('#modalStockPorEquipo').modal('show');
	     	}
        });
	}
	
	const validarForm = () =>{
		let flag = true;
		if($("#seleccionados").val() == ""){
			flag = false;
			alertify.alert('DEBE ELEGIR AL MENOS UN EQUIPO', function () {
				return(flag);
     		});
		}
		return(flag);
	}
	
	
	
</script>


		
		
	
