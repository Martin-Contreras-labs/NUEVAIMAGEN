@(mapDiccionario: Map[String,String], mapPermiso: Map[String,String], userMnu: utilities.UserMnu,
listaAconfirmar: List[List[String]])

    	
@main("") {

	@menues(mapDiccionario, mapPermiso, userMnu, " ")
	<div id="mostrarmostrar" style="display:none;">
		@barraTitulo(mapDiccionario, "MODIFICAR COMPRA Y/O ADQUISICION","(modifica inventarios)")
		<form id="form" method="post" action="/compraConfirmaIngreso/">
			<input type="hidden" id="cambiosDeEstados" name="cambiosDeEstados">
			<div class="row  justify-content-md-center">
				<div class="col-xs-12 col-sm-11 col-md-11 col-lg-11">
					<table id="tablaPrincipal" class="table table-sm table-hover table-bordered table-condensed table-fluid">
						<thead style="background-color: #eeeeee">
							<TR>
								<TH style="min-width:80px;">FECHA<BR>COMPRA</TH>
								<TH>NUMERO<BR>DOCUMENTO</TH>
								<TH>OBSERVACIONES</TH>
								<TH>CODIGO<BR>EQUIPO</TH>
								<TH>NOMBRE<BR>EQUIPO</TH>
								<TH>UNIDAD</TH>
								<TH>CANTIDAD</TH>
								<TH>SUCURSAL</TH>
								<TH>@mapDiccionario.get("BODEGA")<BR>DESTINO</TH>
								<TH>
									CONFIRMAR<br>
									<input id="btnSelectAll" type="button" class="btn btn-sm btn-secondary" onclick="selectAll()" value="Select Todo">
								</TH>
							</TR>
						</thead>
						<tbody>
							@for(lista1 <- listaAconfirmar){
								<TR>
									<td  style="text-align:center;">
										<div style="display:none">@utilities.Fechas.AAMMDD(lista1.get(3))</div>
										@utilities.Fechas.DDMMAA(lista1.get(3))
									</td>
									<td  style="text-align:center;">@lista1.get(4)</td>
									<td  style="text-align:left;">@lista1.get(11)</td>
									<td  style="text-align:left;">@lista1.get(5)</td>
									
									<td  style="text-align:left;">@lista1.get(6)</td>
									<td  style="text-align:center;">@lista1.get(7)</td>
									<td  style="text-align:right;">@lista1.get(8)</td>
									<td  style="text-align:left;">@lista1.get(12)</td>
									<td  style="text-align:left;">@lista1.get(9)</td>
									<td  style="text-align:center;">
										<input type="hidden" class="idCompra" value="@lista1.get(0)">
										<input type="hidden" class="idEquipo" value="@lista1.get(10)">
										<input type="hidden" class="cantCant" value="@lista1.get(8)">
										<input type="hidden" class="idBodDest" value="@lista1.get(2)">
										<input type="hidden" class="idSucursal" value="@lista1.get(13)">
										<input type="checkbox" class="checkVal" id="@lista1.get(0)" value ="0" 
										onchange="cambiaEstado(id,value,'@lista1.get(10)','@lista1.get(8)','@lista1.get(2)','@lista1.get(13)')">
									</td>
								</TR>
				 			}
						</tbody>
					</table>
				</div>
			</div>
			<div class="noprint">
				<div class="row justify-content-md-center" >
					<div class="col-xs-5 col-sm-2 col-md-2 col-lg-2">
						<input type="button"  value="Cancelar" class="btn btn-light btn-sm rounded-pill btn-block" onclick="location.href='/home/';">
					</div>
					<div class="col-xs-5 col-sm-2 col-md-2 col-lg-2">
						<input type="button" value='CONFIRMAR' onclick="this.disabled=true; document.getElementById('form').submit();" class="btn btn-primary btn-sm rounded-pill btn-block">
					</div>
				</div>
			</div>
		</form>
	</div>
	
	

}


<script type="text/javascript">
	$(document).ready(function() {
		  $('#tablaPrincipal').DataTable({
		    	"fixedHeader": true,
		    	"lengthMenu": [[20, 50, 100, 200, -1], [20, 50, 100, 200, "All"]],
		    	"order": [[ 0, "desc" ]],
		    	"language": {
		        	"url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json"
		        }
		  } );
		  document.getElementById('mostrarmostrar').style.display="block";
	});
	
	
	const cambiaEstado = (id_compra, valor, id_equipo, cantidad, id_bodegaDestino, id_sucursal) => {
		cantidad = cantidad.replace(/,/g,'');
		if(valor==0) {
			document.getElementById(id_compra).value ="1";
			let aux = ""+$("#cambiosDeEstados").val()+id_compra + "," + id_sucursal  + "," + id_equipo + "," + cantidad + "," + id_bodegaDestino + ";"
			$("#cambiosDeEstados").val(aux);
		}else{
			document.getElementById(id_compra).value ="0";
			let aux = ""+id_compra + "," + id_sucursal + "," + id_equipo + "," + cantidad + "," + id_bodegaDestino + ";"
			$("#cambiosDeEstados").val($("#cambiosDeEstados").val().replace(aux,""));
		}
		
	}
	
			
	const selectAll = () => {
		$(".checkVal").attr('checked',true);
		let filas = $(".checkVal").length;
		let aux = "";
		for(let i=0; i<filas; i++){
			$(".checkVal")[i].value = "1";
			
			aux += ""+$(".idCompra")[i].value + "," + $(".idSucursal")[i].value  
					+ "," + $(".idEquipo")[i].value + "," + $(".cantCant")[i].value 
					+ "," + $(".idBodDest")[i].value + ";"
			$("#cambiosDeEstados").val(aux);
		}
	}
	
	
</script>




		
		
	
