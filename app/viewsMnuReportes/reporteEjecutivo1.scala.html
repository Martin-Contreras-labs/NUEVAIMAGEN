@(mapDiccionario: Map[String,String], mapPermiso: Map[String,String], userMnu: utilities.UserMnu,
valorizado: List[String], porUnidades: List[String], grafInversion: String, graficoOcupacion: List[String], valorizadoPorBodega: List[String], graficoPotencialPorMesYGrupo: List[String])

    	
@main("") {
	

	
	<script src="@routes.Assets.versioned("highcharts/highcharts.js")"></script>
	<script src="@routes.Assets.versioned("highcharts/series-label.js")"></script>
	<script src="@routes.Assets.versioned("highcharts/exporting.js")"></script>
	<script src="@routes.Assets.versioned("highcharts/export-data.js")"></script>

	@menues(mapDiccionario, mapPermiso, userMnu, " ")
	
	<div id="enCarga" class="blocker" style="display: block;"><br><br><br><br><br><br><h1>Ahora se esta cargando.....</h1></div>
	
	
	<div id="mostrarmostrar" style="display:none;">
		@barraTitulo(mapDiccionario, "REPORTE EJECUTIVO - SITUACIÓN GLOBAL","")
		
		<div class="row  justify-content-md-center">
			<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
				<table id="ESQUEMAGENERAL" class="table table-sm table-bordered table-condensed table-fluid">
					<TR>
				  		<TD>
							<a href="/graficoInversionExcel/">
								<kbd style="background-color: #73C6B6">Excel</kbd>
							</a>
						</TD>
						<TD>
							<a href="/graficoOcupacionExcel/">
								<kbd style="background-color: #73C6B6">Excel</kbd>
							</a>
						</TD>
					</TR>
					
					<TR>
						<TD id="inversion" style="height: auto; margin: 0 auto"></TD>
				  		<TD id="ocupacion" style="height: auto; margin: 0 auto"></TD>
					</TR>
					
					<TR>
						<TD>
							<a href="/graficoValorizadoGrupoExcel/">
								<kbd style="background-color: #73C6B6">Excel</kbd>
							</a>
						</TD>
						<TD>
							<a href="/graficoUnidadesExcel/">
								<kbd style="background-color: #73C6B6">Excel</kbd>
							</a>
						</TD>
					</TR>
					<TR>
				  		<TD width="40%" id="valorizadoGrupoBodegas" style="height: auto; margin: 0 auto"></TD>
				  		<TD width="40%" id="porUnidadesGrupoBodegas" style="height: auto; margin: 0 auto"></TD>
					</TR>
					<TR>
				  		<TD colspan="2">
							<a href="/graficoValorizadoBodegaExcel/">
								<kbd style="background-color: #73C6B6">Excel</kbd>
							</a>
						</TD>
					</TR>
					<TR>
				  		<TD colspan="2" width="90%" id="valorizadoBodegasEmpresa" style="height: auto; margin: 0 auto">
						</TD>
					</TR>
					<TR>
				  		<TD colspan="2">
							<a href="/graficoPotencialExcel/">
								<kbd style="background-color: #73C6B6">Excel</kbd>
							</a>
						</TD>
					</TR>
					<TR>
				  		<TD colspan="2" width="90%" id="graficoPotencialPorMesYGrupo" style="height: auto; margin: 0 0">
						</TD>
					</TR>
				</table>
				
				<div class="noprint">
					<div class="row justify-content-md-center" >
						<div class="col-xs-5 col-sm-2 col-md-2 col-lg-2">
							<input type="button"  value="VOLVER" class="btn btn-success btn-sm rounded-pill btn-block" onclick="window.history.back()">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
}




<script type="text/javascript">
	$(document).ready(function () {
			let total = 0;
			Highcharts.chart('inversion',{
	            chart: {
	                zoomType: 'pie',
					options3d: {
							enabled: true,
                			alpha: 45,
                			beta: 0
            			},
        			events: {
        	            load: function(event) {
        	                for(var i=0, len=this.series[0].yData.length; i<len; i++){
        	                    total += this.series[0].yData[i];
        	                }
        	              var text = this.renderer.text(
        	                'Total M$: ' + Highcharts.numberFormat(total,0),
        	                this.plotLeft,
        	                this.plotTop - 20
        	            	).attr({
        	                	zIndex: 5
        	            	}).add()
        	            }
        	        }
    			},
				title: {
        			text: 'INVERSIÓN'
    			},
    			tooltip: {
    				formatter: function() {
    	                return Highcharts.numberFormat(this.percentage, 2) + '%<br />' + '<b>' + 
    	                this.point.name + '</b><br />M$: ' + Highcharts.numberFormat(this.y, 0);
    	            }
    	        
    			},
				plotOptions: {
        			pie: {
            			allowPointSelect: true,
            			cursor: 'pointer',
            			depth: 50,
            			dataLabels: {
                			enabled: true,
                			format: '{point.name}'
            			}
        			}
    			},
            	series: [{
        			type: 'pie',
        			name: 'Porcentaje',
     				data:  @Html(grafInversion)
    			}]
	        });


			Highcharts.chart('ocupacion',{
	            chart: {
	                zoomType: 'xy'
	            },
	            title: {
	                 text: '% OCUPACIÓN MENSUAL (Valorizado)'
	            },
	            subtitle: {
	                text: ''
	            },
	            xAxis: [{
	            	categories: @Html(graficoOcupacion.get(0)),
	                labels: {
	                    rotation: -45,
	                    align: 'right',
	                    style: {
	                        fontSize: '10px',
	                        fontFamily: 'Verdana, sans-serif'
	                    }
	                }
	            }],
	            yAxis: {
	                min: 0,
	                max: 100,
	                title: {
	                    text: 'Porcentaje'
	                },
	                stackLabels: {
	                    enabled: true,
	                    style: {
	                        fontWeight: 'bold',
	                        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
	                    }
	                }
	            },
	            tooltip: {
	                shared: true
	            },
	            legend: {
	                layout: 'horizontal',
	                align: 'center',
	                verticalAlign: 'top',
	                y: 30,
	                floating: false,
	                borderWidth: 0,
	                backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
	            },
	            plotOptions: {
	                spline: {
	                    lineWidth: 1,
	                    states: {
	                        hover: {
	                            lineWidth: 6
	                        }
	                    },
	                    marker: {
	                        enabled: false
	                    }
	                }
	            },
	            series: [
	               @for(lista <- graficoOcupacion.tail){
	            	   @Html(lista)
	               }

	            ]
	        });

			Highcharts.chart('valorizadoGrupoBodegas',{
	            chart: {
                	type: 'column',
                	events: {
        	            load: function(event) {
        	                superTotal=total;
        	              var text = this.renderer.text(
        	                'Total M$: ' + Highcharts.numberFormat(total,0),
        	                this.plotLeft -60,
        	                this.plotTop - 60
        	            	).attr({
        	                	zIndex: 5
        	            	}).add()
        	            }
        	        }
	            },
	            title: {
	                text: 'DISTRIBUCION PORCENTUAL POR VALORIZACION'
	            },
	            xAxis: {
	            	categories: @Html(valorizado.get(0)),
	                labels: {
	                    rotation: -45,
	                    align: 'right',
	                    style: {
	                        fontSize: '10px',
	                        fontFamily: 'Verdana, sans-serif'
	                    }
	                }
	            },
	            yAxis: {
	                min: 0,
					max:100,
	                title: {
	                    text: 'Porcentaje'
	                },
	                stackLabels: {
	                    enabled: false,
	                    style: {
	                        fontWeight: 'bold',
	                        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
	                    }
	                }
	            },
	            legend: {
	            	layout: 'horizontal',
	                align: 'center',
	                verticalAlign: 'top',
	                y: 30,
	                floating: false,
	                backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
	                borderColor: '#CCC',
	                borderWidth: 1,
	                shadow: false
	            },
	            tooltip: {
	                formatter: function() {
	                    return '<b>'+ this.x +'</b><br/>'+
	                        this.series.name +'  '+ Highcharts.numberFormat(this.y,0) +' %';
	                }
	            },
	            plotOptions: {
	                column: {
	                    stacking: 'normal',
	                    dataLabels: {
	                        enabled: false,
	                        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white',
	                        style: {
	                            textShadow: '0 0 3px black, 0 0 3px black'
	                        }
	                    }
	                }
	            },
	            series: @Html(valorizado.get(1))
	        });

			Highcharts.chart('graficoPotencialPorMesYGrupo',{
	            chart: {
                	type: 'column',
                	events: {
        	            load: function(event) {
        	              let totalarr = 0;
        	                for(var i=0, len=this.series[1].yData.length; i<len; i++){
        	                    totalarr += this.series[0].yData[i]+this.series[1].yData[i];
        	                }
        	              var text = this.renderer.text(
        	                'Total M$: ' + Highcharts.numberFormat(totalarr,0),
        	                this.plotLeft -60,
        	                this.plotTop - 60
        	            	).attr({
        	                	zIndex: 5
        	            	}).add()
        	            }
        	        }
	            },
	            title: {
	                text: 'POTENCIAL DE @mapDiccionario.get("ARRIENDO") 30 DIAS <br> (a Precio Lista en Miles de @mapDiccionario.get("PESOS"))'
	            },
	            xAxis: {
	            	categories: @Html(graficoPotencialPorMesYGrupo.get(0)),
	                labels: {
	                    rotation: -45,
	                    align: 'right',
	                    style: {
	                        fontSize: '10px',
	                        fontFamily: 'Verdana, sans-serif'
	                    }
	                }
	            },
	            yAxis: {
	                min: 0,
	                title: {
	                    text: 'Miles de @mapDiccionario.get("PESOS")'
	                },
	                stackLabels: {
	                    enabled: false,
	                    style: {
	                        fontWeight: 'bold',
	                        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
	                    }
	                }
	            },
	            legend: {
	            	layout: 'horizontal',
	                align: 'center',
	                verticalAlign: 'top',
	                y: 60,
	                floating: false,
	                backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
	                borderColor: '#CCC',
	                borderWidth: 1,
	                shadow: false
	            },
	            tooltip: {
	                formatter: function() {
	                    return '<b>'+ this.x +'</b><br/>'+
	                        this.series.name +' M$: '+ Highcharts.numberFormat(this.y,0) +'<br/>'+
	                        'Total M$: '+ Highcharts.numberFormat(this.point.stackTotal,0);
	                }
	            },
	            plotOptions: {
	                column: {
	                    stacking: 'normal',
	                    dataLabels: {
	                        enabled: false,
	                        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white',
	                        style: {
	                            textShadow: '0 0 3px black, 0 0 3px black'
	                        }
	                    }
	                }
	            },
	            series: @Html(graficoPotencialPorMesYGrupo.get(1))
	        });

			Highcharts.chart('porUnidadesGrupoBodegas',{
	            chart: {
                	type: 'column'
	            },
	            title: {
	                text: 'DISTRIBUCION PORCENTUAL POR UNIDADES'
	            },
	            xAxis: {
	            	categories: @Html(porUnidades.get(0)),
	                labels: {
	                    rotation: -45,
	                    align: 'right',
	                    style: {
	                        fontSize: '10px',
	                        fontFamily: 'Verdana, sans-serif'
	                    }
	                }
	            },
	            yAxis: {
	                min: 0,
					max:100,
	                title: {
	                    text: 'Porcentaje'
	                },
	                stackLabels: {
	                    enabled: false,
	                    style: {
	                        fontWeight: 'bold',
	                        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
	                    }
	                }
	            },
	            legend: {
	            	layout: 'horizontal',
	                align: 'center',
	                verticalAlign: 'top',
	                y: 30,
	                floating: false,
	                backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
	                borderColor: '#CCC',
	                borderWidth: 1,
	                shadow: false
	            },
	            tooltip: {
	            	formatter: function() {
	                    return '<b>'+ this.x +'</b><br/>'+
	                        this.series.name +'  '+ Highcharts.numberFormat(this.y,0) +' %';
	                }
	            },
	            plotOptions: {
	                column: {
	                    stacking: 'normal',
	                    dataLabels: {
	                        enabled: false,
	                        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white',
	                        style: {
	                            textShadow: '0 0 3px black, 0 0 3px black'
	                        }
	                    }
	                }
	            },
	            series: @Html(porUnidades.get(1))
	        });

			Highcharts.chart('valorizadoBodegasEmpresa',{
	            chart: {
	                type: 'column',
	                events: {
	    	            load: function(event) {
	
	    	              var text = this.renderer.text(
	    	                'Total M$: ' + Highcharts.numberFormat(superTotal,0),
	    	                this.plotLeft -50,
	    	                this.plotTop -20
	    	            	).attr({
	    	                	zIndex: 5
	    	            	}).add()
	    	            }
	    	        }
	            },
	            title: {
	                text: 'INVENTARIO VALORIZADO - solo @mapDiccionario.get("BODEGA")/PROYECTO (en Miles de @mapDiccionario.get("PESOS"))'
	            },
	            xAxis: {
	            	categories: @Html(valorizadoPorBodega.get(0)),
	                labels: {
	                    rotation: -45,
	                    align: 'right',
	                    style: {
	                        fontSize: '10px',
	                        fontFamily: 'Verdana, sans-serif'
	                    }
	                }
	            },
	            yAxis: {
	                min: 0,
	                title: {
	                    text: 'Miles de @mapDiccionario.get("PESOS")'
	                },
	                stackLabels: {
	                    enabled: false,
	                    style: {
	                        fontWeight: 'bold',
	                        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
	                    }
	                }
	            },
	            
	            legend: {
	            	layout: 'horizontal',
	                align: 'center',
	                verticalAlign: 'top',
	                y: 30,
	                floating: false,
	                backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
	                borderColor: '#CCC',
	                borderWidth: 1,
	                shadow: false
	            },
	            tooltip: {
	            	formatter: function() {
	                    return '<b>'+ this.series.name +' M$: '+ Highcharts.numberFormat(this.y,0) +'</b>';
	                }
	            },
	            plotOptions: {
	                column: {
	                    stacking: 'normal',
	                    dataLabels: {
	                        enabled: false,
	                        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white',
	                        style: {
	                            textShadow: '0 0 3px black, 0 0 3px black'
	                        }
	                    }
	                }
	            },
	            series: @Html(valorizadoPorBodega.get(1))
	        });


			document.getElementById('enProceso').style.display="none";
			document.getElementById('mostrarmostrar').style.display="block";
			document.getElementById('enCarga').style.display="none";
			
	   });
			  
	
</script>


		
		
	
