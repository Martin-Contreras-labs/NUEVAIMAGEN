@(mapDiccionario: Map[String,String], mapPermiso: Map[String,String], userMnu: utilities.UserMnu,
actaBaja: tables.ActaBaja, detalleBaja: List[List[String]])

    	
@main("") {

@menues(mapDiccionario, mapPermiso, userMnu, " ")
		<div id="mostrarmostrar" style="display:none;">
			@barraTitulo(mapDiccionario, "DETALLE ACTA DE BAJA","")
			<div class="row  justify-content-md-center">
				<div class="col-xs-12 col-sm-11 col-md-11 col-lg-11">
					<table class="table table-sm table-hover table-bordered table-condensed table-fluid">
						<thead style="background-color: #eeeeee">
							<tr>
								<td width="300px">
									<div class="input-group">
								  		<div class="input-group-prepend">
								    		<span class="input-group-text" id="basic-addon1">Nro ACTA DE BAJA</span>
								  		</div>
								  		<input type="hidden" name="id_actaBaja" value="@actaBaja.getId()">
	  									<input type="text" class="form-control center"
	  										name="numero"
	  										value="@actaBaja.getNumero()"
	  										readonly>
									</div>
								</td>
								<td width="230px">
									<div class="input-group">
								  		<div class="input-group-prepend">
								    		<span class="input-group-text" id="basic-addon1">Fecha</span>
								  		</div>
								  		<input type="date" class="form-control center"
								  			name="fecha"
								  			value="@utilities.Fechas.AAMMDD(actaBaja.getFecha())"
						        			readonly>
									</div>
								</td>
								<td style="text-align:left;">
									@if(actaBaja.getActaBajaPDF().equals("0")){
										--
									}else{
										<a href="#" onclick="descargaDocumento('@actaBaja.getActaBajaPDF()')">
											<kbd style="background-color: #7F8C8D">doc</kbd>
										</a>
									}
								</td>
							</tr>
							<tr>
								<td colspan="7">
									<div class="input-group">
								  		<div class="input-group-prepend">
								    		<span class="input-group-text" id="basic-addon1">Observaciones</span>
								  		</div>
	  									<textarea class="form-control" 
	  										name="observaciones" 
	  										autocomplete="off" readonly>@actaBaja.getObservaciones()</textarea>
									</div>
								</td>
							</tr>
						</thead>
					</table>
					<hr>
					<table id="tablaPrincipal" class="table table-sm table-hover table-bordered table-condensed table-fluid">
						<thead style="background-color: #eeeeee">
							<TR>
								<TH width="10%">CODIGO</TH>
								<TH width="20%">EQUIPO</TH>
						        <TH width="3%">UN</TH>
								<TH width="8%">CANTIDAD</TH>
								<TH width="3%">MONEDA</TH>
								<TH width="10%">P.UNITARIO<br>COMPRA</TH>
								<TH width="10%">TOTAL</TH>
								<TH width="28%">MOTIVO DE BAJA</TH>
								<TH width="8%">CONFIRMADA</TH>
							</TR>
						</thead>
						<tbody>
				 			@for(lista1 <- detalleBaja){
								<TR>
									<td  style="text-align:left;">@lista1.get(4)</td>
									<td  style="text-align:left;">@lista1.get(5)</td>
									<td  style="text-align:center;">@lista1.get(8)</td>
									<td  style="text-align:right;" class="cantidad">@lista1.get(13)</td>
									<td  style="text-align:center;">@lista1.get(10)</td>
									<td  style="text-align:right;">@lista1.get(11)</td>
									<td  style="text-align:right;" class="total">@lista1.get(16)</td>
									<td  style="text-align:left;">@lista1.get(14)</td>
									<td  style="text-align:center;">@lista1.get(15)</td>
								</TR>
				 			}
				 			<TR style="background-color: #eeeeee">
						        <td></td>
								<td>TOTALES</td>
								<td></td>
								<td><div id="totalCantidad" align="right">0.00</div></td>
								<td></td>
								<td></td>
								<td><div id="totalTotal" align="right">0.00</div></td>
								<td></td>
								<td></td>
							</TR>
						</tbody>
					</table>
				</div>
			</div>
			<div class="noprint" align="left">
				<div class="row justify-content-md-center" >
					<div class="col-xs-5 col-sm-1 col-md-1 col-lg-1">
						<input type="button"  value="Volver" class="btn btn-success btn-sm rounded-pill btn-block" onclick="location.href='/listBajasPorActa/';">
					</div>
				</div>
			</div>
		</div>
	
	<form class="formulario" id="formDescargaDocumento" method="post" action="/downloadPDF/">	
		<input type="hidden" id="descargaDocumento" name="nombreArchivo">
	</form>
	
}




<script type="text/javascript">

	$(document).ready(function() {
		sumaTotales();
		document.getElementById('mostrarmostrar').style.display="block";
	});
	
	let cantAux = 0;
	const verificaCantidad = (id_equipo, id_cotizacion, stock, cantidad) =>{
		stock = stock.replace(/,/g,'');
		if(parseFloat(cantidad) > parseFloat(stock)){
			alertify.alert('La cantidad no puede ser mayor al stock disponible para dar de baja', function () {
				$("#cantidad_"+id_equipo+"_"+id_cotizacion).val(formatStandar(cantAux,2));
     		});
		}else{
			$("#cantidad_"+id_equipo+"_"+id_cotizacion).val(formatStandar(cantidad,2));
		}
		sumaTotales();
	}
	
	
	const sumaTotales = () => {
		 let sum = 0;
			$(".total").each(function() {
				let val = $(this).text().replace(/,/g,'');
				sum += parseFloat(val);
			}); $("#totalTotal").text(formatStandar(sum,2));
			sum = 0;
			$(".cantidad").each(function() {
				let val = $(this).text().replace(/,/g,'');
				sum += parseFloat(val);
			}); $("#totalCantidad").text(formatStandar(sum,2));
	}
	
	const descargaDocumento = (nombreDOC) => {
		  $('#descargaDocumento').val(nombreDOC);
		  document.getElementById('formDescargaDocumento').submit();
	}

	

	
</script>


		
		
	
