@(listaPaises: List[String], mensaje: String)

@main("") {

<style>
	.fondo{
	   background: url('/assets/images/area5-fondo.jpg') no-repeat center center;
	   background-size: cover;
	   width: 100% ;
	   text-align: center;
	 
	}
</style>

	<div class="row">
		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
			<div style="height:400px; padding-top:60px;" class="fondo">
				<div class="container align-bottom" >
					<div class="row justify-content-md-center" >
						<div class="col-xs-10 col-sm-4 col-md-4 col-lg-4">
	                    	<h2>MADA</h2>
		                    <form onsubmit="return validarIngreso()">
<!-- <a href="/routes2/prueba/" target="_blank">Abrir en nueva pesta√±a</a> -->
		                    		<input type="hidden" id="gRecaptchaResponse" name="gRecaptchaResponse">
		                    		<div class="input-group mb-3">
									  <div class="input-group-prepend">
									    <label class="input-group-text" for="pais" style="width:120px">Pais</label>
									  </div>
									  <select class="custom-select" style="min-width:120px" id="pais" name="pais" 
									  		onchange='$("#ingPais").val(value)'>
									  	@for(lista <- listaPaises){
									  		<option value="@lista">@lista</option>
									  	}
									  </select>
									</div>
									<div class="input-group mb-3">
									  <div class="input-group-prepend">
									    <label class="input-group-text" for="empresa" style="width:120px">Empresa</label>
									  </div>
									  <input type="text" class="form-control" style="min-width:120px" 
									  		onchange='value= value.toUpperCase(); $("#ingEmpresa").val(value.toUpperCase())' 
												id="empresa" name="empresa" placeholder="Empresa" required>
									</div>
									<div class="input-group mb-3">
									  <div class="input-group-prepend">
									    <label class="input-group-text" for="userName"  style="width:120px">Usuario</label>
									  </div>
									  <input type="text" class="form-control" style="min-width:120px" 
									  		onchange='value= value.toUpperCase(); $("#ingUserName").val(value.toUpperCase())' id="userName" name="userName" placeholder="Usuario" required>
									</div>
									<div class="input-group mb-3">
									  <div class="input-group-prepend">
									    <label class="input-group-text" for="userKey"  style="width:120px">Clave</label>
									  </div>
									  <input type="password" class="form-control" style="min-width:120px" 
									  		onchange='$("#ingUserKey").val(value)' name="userKey" placeholder="Clave" required>
									</div>
			                    
			
			
									<div id="ingresar1">
										<input type="submit"  value="INGRESAR" class="btn btn-success rounded-pill btn-block">
									</div>
			

									
		                    </form>
		                    <br>
						</div>
	                  	<div class="col-xs-10 col-sm-4 col-md-4 col-lg-4" align="center">
	                  	<br>
	                    	<img src="/assets/images/mada-pc.png" alt="MADA" width="80%" height="auto">
	                  	</div>
	         		</div>
	         	</div>
	         </div>
		</div>


<form id="ingresar" action="/routes3/mantWebInicio1/" method="POST">
	<input type="hidden" id="ingCaptcha" name="gRecaptchaResponse">
	<input type="hidden" id="ingPais" name="pais" value="CHILE">
	<input type="hidden" id="ingEmpresa" name="empresa">
	<input type="hidden" id="ingUserName" name="userName">
	<input type="hidden" id="ingUserKey" name="userKey">
</form>


}

<script src="https://www.google.com/recaptcha/enterprise.js?render=6Lcm3DUjAAAAAMEhoeru8yNe1j7XGIRV2vG2nsV9"></script>
<script>
	function validarIngreso() {
	  grecaptcha.enterprise.ready(async () => {
	    const token = await grecaptcha.enterprise.execute('6Lcm3DUjAAAAAMEhoeru8yNe1j7XGIRV2vG2nsV9', {action: 'LOGIN'}).then(onSuccessIngreso, onError);
	  });
	  if($("#gRecaptchaResponse").val().length > 0){
	  	return true;
	  }else{
	  	return false;
	  }
	}
	function onSuccessIngreso(action_token){
		
		let btnIngresar = "<button style=\"visibility: visible;\" class=\"btn btn-success rounded-pill btn-block\""+
		" type=\"button\" disabled>"+
		"<span class=\"spinner-border spinner-border-sm mr-2\"></span>Enviando datos...</button>";
		$("#ingresar1").html(btnIngresar);
		
			$("#ingCaptcha").val(action_token);
			$("#ingresar").submit();
	}
	
	function validarRecuperar() {
	  grecaptcha.enterprise.ready(async () => {
	    const token = await grecaptcha.enterprise.execute('6Lcm3DUjAAAAAMEhoeru8yNe1j7XGIRV2vG2nsV9', {action: 'LOGIN'}).then(onSuccessRecuperar, onError);
	  });
	  if($("#gRecaptchaResponse").val().length > 0){
	  	return true;
	  }else{
	  	return false;
	  }
	}
	function onSuccessRecuperar(action_token){
		
		let btnRecuperar = "<button style=\"visibility: visible;\" class=\"btn btn-success rounded-pill btn-block\""+
		" type=\"button\" disabled>"+
		"<span class=\"spinner-border spinner-border-sm mr-2\"></span>Enviando datos...</button>";
		$("#recuperar1").html(btnRecuperar);
			
			$("#recuCaptcha").val(action_token);
			$("#recuperar").submit();
	}
	
	function onError(reason) {
	  alert("problemas con el captcha, contactar a inqsol.cl");
      location.reload();
    }
</script>


	<script>
            $(document).ready(function() {
                if("@mensaje"!="0") alert("@mensaje");          
            });
    </script>
    
    
    
    
    
    
    
    
    
    
    
