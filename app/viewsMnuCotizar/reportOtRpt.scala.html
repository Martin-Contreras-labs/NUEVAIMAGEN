@(mapDiccionario: Map[String,String], mapPermiso: Map[String,String], userMnu: utilities.UserMnu,
 grafValOt: String, grafCantOt: String, grafValSinOt: String, grafCantSinOt: String, fechaDe: String, fechaA: String, tituloSucursal:String)

@main("") {
	
	<script src="@routes.Assets.versioned("highcharts/highcharts.js")"></script>
	<script src="@routes.Assets.versioned("highcharts/series-label.js")"></script>
	<script src="@routes.Assets.versioned("highcharts/exporting.js")"></script>
	<script src="@routes.Assets.versioned("highcharts/export-data.js")"></script>

	@menues(mapDiccionario, mapPermiso, userMnu, " ")
	
	<div id="mostrarmostrar" style="display:none;">
		@barraTitulo(mapDiccionario, "ANALISIS "+mapDiccionario.get("Ordenes_de_trabajo").toUpperCase()+tituloSucursal,"per√≠odo movil: de "+fechaDe+" a "+fechaA)
		
		<div class="row  justify-content-md-center">
			<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
				<table id="ESQUEMAGENERAL" class="table table-sm table-bordered table-condensed table-fluid">
					
					
					<TR>
						<TD id="grafValOt" style="height: auto; margin: 0 auto"></TD>
				  		<TD id="grafCantOt" style="height: auto; margin: 0 auto"></TD>
					</TR>
					<TR>
				  		<TD width="40%" id="grafValSinOt" style="height: auto; margin: 0 auto"></TD>
				  		<TD width="40%" id="grafCantSinOt" style="height: auto; margin: 0 auto"></TD>
					</TR>
				</table>
				
				<div class="noprint">
					<div class="row justify-content-md-center" >
						<div class="col-xs-5 col-sm-2 col-md-2 col-lg-2">
							<input type="button"  value="VOLVER" class="btn btn-success btn-sm rounded-pill btn-block" onclick="window.history.back()">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
}




<script type="text/javascript">
	$(document).ready(function () {
			let total = 0;
			Highcharts.chart('grafValOt',{
	            chart: {
	                zoomType: 'pie',
					options3d: {
							enabled: true,
                			alpha: 45,
                			beta: 0
            			},
        			events: {
        	            load: function(event) {
        	                for(var i=0, len=this.series[0].yData.length; i<len; i++){
        	                    total += this.series[0].yData[i];
        	                }
        	              var text = this.renderer.text(
        	                'Total $: ' + Highcharts.numberFormat(total,0),
        	                this.plotLeft,
        	                this.plotTop - 20
        	            	).attr({
        	                	zIndex: 5
        	            	}).add()
        	            }
        	        }
    			},
				title: {
        			text: 'CON @mapDiccionario.get("OT") vs SIN @mapDiccionario.get("OT")<br>(VALORIZADAS)'
    			},
    			tooltip: {
    				formatter: function() {
    	                return Highcharts.numberFormat(this.percentage, 2) + '%<br />' + '<b>' + 
    	                this.point.name + '</b><br />M$: ' + Highcharts.numberFormat(this.y, 0);
    	            }
    	        
    			},
				plotOptions: {
        			pie: {
            			allowPointSelect: true,
            			cursor: 'pointer',
            			depth: 50,
            			dataLabels: {
                			enabled: true,
                			format: '{point.name}'
            			}
        			}
    			},
            	series: [{
        			type: 'pie',
        			name: 'Porcentaje',
     				data:  @Html(grafValOt)
    			}]
	        });
	            	
	        total = 0;
			Highcharts.chart('grafCantOt',{
	            chart: {
	                zoomType: 'pie',
					options3d: {
							enabled: true,
                			alpha: 45,
                			beta: 0
            			},
        			events: {
        	            load: function(event) {
        	                for(var i=0, len=this.series[0].yData.length; i<len; i++){
        	                    total += this.series[0].yData[i];
        	                }
        	              var text = this.renderer.text(
        	                'Total Unidades: ' + Highcharts.numberFormat(total,0),
        	                this.plotLeft,
        	                this.plotTop - 20
        	            	).attr({
        	                	zIndex: 5
        	            	}).add()
        	            }
        	        }
    			},
				title: {
        			text: 'CON @mapDiccionario.get("OT") vs SIN @mapDiccionario.get("OT")<br>(POR UNIDADES)'
    			},
    			tooltip: {
    				formatter: function() {
    	                return Highcharts.numberFormat(this.percentage, 2) + '%<br />' + '<b>' + 
    	                this.point.name + '</b><br />UN: ' + Highcharts.numberFormat(this.y, 0);
    	            }
    	        
    			},
				plotOptions: {
        			pie: {
            			allowPointSelect: true,
            			cursor: 'pointer',
            			depth: 50,
            			dataLabels: {
                			enabled: true,
                			format: '{point.name}'
            			}
        			}
    			},
            	series: [{
        			type: 'pie',
        			name: 'Porcentaje',
     				data:  @Html(grafCantOt)
    			}]
	        });
	        
	        total = 0;
			Highcharts.chart('grafValSinOt',{
	            chart: {
	                zoomType: 'pie',
					options3d: {
							enabled: true,
                			alpha: 45,
                			beta: 0
            			},
        			events: {
        	            load: function(event) {
        	                for(var i=0, len=this.series[0].yData.length; i<len; i++){
        	                    total += this.series[0].yData[i];
        	                }
        	              var text = this.renderer.text(
        	                'Total $: ' + Highcharts.numberFormat(total,0),
        	                this.plotLeft,
        	                this.plotTop - 20
        	            	).attr({
        	                	zIndex: 5
        	            	}).add()
        	            }
        	        }
    			},
				title: {
        			text: '@mapDiccionario.get("Ordenes_de_trabajo").toUpperCase() <br>POR ESTADO (VALORIZADAS)'
    			},
    			tooltip: {
    				formatter: function() {
    	                return Highcharts.numberFormat(this.percentage, 2) + '%<br />' + '<b>' + 
    	                this.point.name + '</b><br />M$: ' + Highcharts.numberFormat(this.y, 0);
    	            }
    	        
    			},
				plotOptions: {
        			pie: {
            			allowPointSelect: true,
            			cursor: 'pointer',
            			depth: 50,
            			dataLabels: {
                			enabled: true,
                			format: '{point.name}'
            			}
        			}
    			},
            	series: [{
        			type: 'pie',
        			name: 'Porcentaje',
     				data:  @Html(grafValSinOt)
    			}]
	        });

	        total = 0;
			Highcharts.chart('grafCantSinOt',{
	            chart: {
	                zoomType: 'pie',
					options3d: {
							enabled: true,
                			alpha: 45,
                			beta: 0
            			},
        			events: {
        	            load: function(event) {
        	                for(var i=0, len=this.series[0].yData.length; i<len; i++){
        	                    total += this.series[0].yData[i];
        	                }
        	              var text = this.renderer.text(
        	                'Total Unidades: ' + Highcharts.numberFormat(total,0),
        	                this.plotLeft,
        	                this.plotTop - 20
        	            	).attr({
        	                	zIndex: 5
        	            	}).add()
        	            }
        	        }
    			},
				title: {
        			text: '@mapDiccionario.get("Ordenes_de_trabajo").toUpperCase()<br>POR ESTADO (UNIDADES)'
    			},
    			tooltip: {
    				formatter: function() {
    	                return Highcharts.numberFormat(this.percentage, 2) + '%<br />' + '<b>' + 
    	                this.point.name + '</b><br />UN: ' + Highcharts.numberFormat(this.y, 0);
    	            }
    	        
    			},
				plotOptions: {
        			pie: {
            			allowPointSelect: true,
            			cursor: 'pointer',
            			depth: 50,
            			dataLabels: {
                			enabled: true,
                			format: '{point.name}'
            			}
        			}
    			},
            	series: [{
        			type: 'pie',
        			name: 'Porcentaje',
     				data:  @Html(grafCantSinOt)
    			}]
	        });



			document.getElementById('mostrarmostrar').style.display="block";
	   });
			  
	
</script>


		
		
	
