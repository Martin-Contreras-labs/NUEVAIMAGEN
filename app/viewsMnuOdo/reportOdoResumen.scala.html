@(mapDiccionario: Map[String,String], mapPermiso: Map[String,String], userMnu: utilities.UserMnu,
desde: utilities.Fechas, hasta: utilities.Fechas, uf: Double, usd: Double, eur: Double, 
totalesPorProyecto: List[List[String]], mapAgrupado: Map[String, List[List[String]]],  mapDetallado: Map[String, List[List[String]]], cantDec: Long)

    	
	<!-- ANCLA CABECERAS DE TABLAS -->
	<style type="text/css"> 
        thead tr th { 
            position: sticky;
			background-color: #eeeeee;
            top: 0;
        }
    </style>


	@main("") {

		@menues(mapDiccionario, mapPermiso, userMnu, " ")
		<div id="mostrarmostrar">
			@barraTitulo(mapDiccionario, "REPORTE ODO RESUMEN Y DETALLE POR TODOS LOS PROYECTOS (INCLUIDOS AJUSTES DE EP)",
				"PERIODO: desde " + desde.getFechaStr() +" --- hasta: " +  hasta.getFechaStr())
				
			<div class="noprint">
				<table class="table table-sm table-condensed table-fluid">
					<tr>
						<td>
							<div align="center">
								<button type="button"  class="btn btn-sm btn-success" onclick="document.getElementById('excel').submit()">
									Exportar a Excel
								</button>
								<button type="button" class="btn btn-sm btn-success" tabindex="-1" onclick="window.print(); return false;" >
									Imprimir
								</button>
								<button type="button"  class="btn btn-sm btn-success" 
									onclick="history.go(-1);return false;">
									Volver
								</button>
							</div>
						</td>
					</tr>
				</table>
			</div>
			
			<form id="excel" class="formulario" method="post" action="/reportOdoResumenExcel/">
				<input type="hidden" name="fechaDesde" value="@desde.getFechaSql().toString()">
				<input type="hidden" name="fechaHasta" value="@hasta.getFechaSql().toString()">
				<input type="hidden" name="uf" value="@uf">
				<input type="hidden" name="usd" value="@usd">
				<input type="hidden" name="eur" value="@eur">
			</form>
			
			
			<table id="general" class="table table-sm table-bordered table-condensed table-fluid">
				<tr>
					<td>
						<div align="left"><h5><b><font color="#008000"> RESUMEN POR PROYECTOS (INCLUYE AJUSTES A EP): </font></b></h5></div>
						
						<div class="table-responsive">
							<table id="tablaResumen" class="table table-sm table-hover table-bordered table-condensed table-fluid">
						        <thead style="background-color: #eeeeee">
							        <TR> 
								        <TH style= "text-align: center;vertical-align: top;">SUCURSAL</TH>
										<TH style= "text-align: center;vertical-align: top;">@mapDiccionario.get("BODEGA")/PROYECTO</TH>
										<TH style= "text-align: center;vertical-align: top;">NOMBRE<BR>CLIENTE</TH>
										<TH style= "text-align: center;vertical-align: top;">NOMBRE<br>PROYECTO</TH>
										<TH style= "text-align: center;vertical-align: top;">COMERCIAL</TH>
										
										<TH style= "text-align:center;vertical-align:top;">SUBTOTAL<BR>(en @mapDiccionario.get("PESOS"))</TH>
										<TH style= "text-align:center;vertical-align:top;">AJUSTES<BR>(en @mapDiccionario.get("PESOS"))</TH>
										<TH style= "text-align:center;vertical-align:top;">TOTAL<BR>(en @mapDiccionario.get("PESOS"))</TH>
									</TR>
								</thead>
								<tbody>
									@for(lista1 <- totalesPorProyecto){
										<TR>
											<td style="text-align:left;vertical-align:middle;">@lista1.get(10)</td>
											<td style="text-align:left;vertical-align:middle;">@lista1.get(1)</td>
											<td style="text-align:left;vertical-align:middle;">@lista1.get(2)</td>
											<td style="text-align:left;vertical-align:middle;">@lista1.get(3)</td>
											<td style="text-align:left;vertical-align:middle;">@lista1.get(4)</td>
											<td style= "text-align:right;" class="subtotal">@lista1.get(5)</td>
											<td style= "text-align:right;" class="ajuste">@lista1.get(6)</td>
											<td style= "text-align:right;" class="total">@lista1.get(7)</td>
										</TR>
						 			}
								</tbody>
								<tfoot>
									<TR>
										<td style="background-color: #eeeeee">TOTALES</td>
										<td style="background-color: #eeeeee"></td>
										<td style="background-color: #eeeeee"></td>
										<td style="background-color: #eeeeee"></td>
										<td style="background-color: #eeeeee"></td>
										<td style="background-color: #eeeeee;text-align:right;" id="subtotal"></td>
										<td style="background-color: #eeeeee;text-align:right;" id="ajuste"></td>
										<td style="background-color: #eeeeee;text-align:right;" id="total"></td>
									</TR>
								</tfoot>
							</table>
						</div>
					</td>
				</tr>
				
				<tr>
					<td>
						<br><br><br>
						<div align="left"><h5><b><font color="#008000"> DETALLE POR PROYECTO (INCLUYE AJUSTES A EP): </font></b></h5></div>	
						<div class="table-responsive">
							@for(lista1 <- totalesPorProyecto){
								@if(mapAgrupado.get(lista1.get(0))!=null && mapDetallado.get(lista1.get(0))!=null){
									
									<table class="table table-sm table-hover table-bordered table-condensed table-fluid">
										<TR>
											<td colspan="20" style="background-color:green;text-align:left">
												<h5><b><font color="white"> @lista1.get(1) </font></b></h5>
											</td>
										</TR>
									</table>

									<table id="tablaAgrupado" class="table table-sm table-hover table-bordered table-condensed table-fluid" >
										<thead class="header">
											<TR> 
												<TH colspan="13" style="text-align:left;vertical-align:top;background-color:#eeeeee;">RESUMEN AGRUPADO:</TH>
											</TR>
								        	<TR> 
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">FAMILIA</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">NRO.COTI</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">COD-SERVICIO</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">SERVICIO</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">COD-EQUIPO</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">EQUIPO</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">UN</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">CANT</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">TOTAL</TH>
												
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">CANT MIN</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">TOTAL MINIMO</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">TOTAL ADICIONAL</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">GRAN TOTAL</TH>
		
											</TR>
										</thead>
										<tbody>
											@for((inicial,index) <- mapAgrupado.get(lista1.get(0)).zipWithIndex){
												<tr>
													<td style="text-align: left;">@inicial.get(0)</td>
													<td style="text-align: center;">@inicial.get(12)</td>
													<td style="text-align: center;">@inicial.get(1)</td>
													<td style="text-align: left;">@inicial.get(2)</td>
													<td style="text-align: center;">@inicial.get(3)</td>
													<td style="text-align: left;">@inicial.get(4)</td>
													<td style="text-align: center;">@inicial.get(5)</td>
													<td style="text-align: right;" class="@lista1.get(0)_resumenTot1">@inicial.get(6)</td>
													<td style="text-align: right;" class="@lista1.get(0)_resumenTot2">@inicial.get(7)</td>
													
													<td style="text-align: right;" class="@lista1.get(0)_resumenTot21">@inicial.get(8)</td>
													<td style="text-align: right;" class="@lista1.get(0)_resumenTot22">@inicial.get(9)</td>
													<td style="text-align: right;" class="@lista1.get(0)_resumenTot23">@inicial.get(10)</td>
													<td style="text-align: right;" class="@lista1.get(0)_resumenTot24">@inicial.get(11)</td>
							
								 			}
								 			<TR style="background-color: #9FF781">
												<td style="background-color: #9FF781" colspan="7">TOTALES NETO (sin ajustes)</td>
												<td style="background-color: #9FF781"><div align="right" id="@lista1.get(0)_resumenTot1"></div></td>
												<td style="background-color: #9FF781"><div align="right" id="@lista1.get(0)_resumenTot2"></div></td>
												
												<td style="background-color: #9FF781"><div align="right" id="@lista1.get(0)_resumenTot21"></div></td>
												<td style="background-color: #9FF781"><div align="right" id="@lista1.get(0)_resumenTot22"></div></td>
												<td style="background-color: #9FF781"><div align="right" id="@lista1.get(0)_resumenTot23"></div></td>
												<td style="background-color: #9FF781"><div align="right" id="@lista1.get(0)_resumenTot24"></div></td>
											</tr>
										</tbody>
									</table>
									
									<br>
				  
									<table id="tablaDetallado" class="table table-sm table-hover table-bordered table-condensed table-fluid" >
										<thead class="header">
											<TR> 
												<TH colspan="7" style="text-align:left;vertical-align:top;background-color:#eeeeee;">DETALLE DE LOS SERVICIOS:</TH>
												<TH colspan="2" style="text-align:left;vertical-align:top;background-color:#eeeeee;">EQUIPOS ASOCIADOS:</TH>
												<TH colspan="2" style="text-align:left;vertical-align:top;background-color:#eeeeee;">HORARIO:</TH>
												<TH colspan="3" style="text-align:left;vertical-align:top;background-color:#eeeeee;">LECTURA:</TH>
												<TH colspan="6" style="text-align:left;vertical-align:top;background-color:#eeeeee;">VALORIZACION:</TH>
											</TR>
								        	<TR> 
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">ID</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">FAMILIA</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">NRO.COTI</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">COD-SERVICIO</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">SERVICIO</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">FECHA</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">DETALLE</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">COD-EQUIPO</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">EQUIPO</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">HR INI</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">HR TER</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">UN</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">LECT INI</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">LECT TER</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">CANT</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">MON</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">PU</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">SUBTOTAL</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">TASA</TH>
												<TH style="text-align:center;vertical-align:top;background-color:#eeeeee;">TOTAL</TH>
											</TR>
										</thead>
										<tbody>
											@for((inicial,index) <- mapDetallado.get(lista1.get(0)).zipWithIndex){
												<tr>
													<td style="text-align: center;">@inicial.get(6)</td>
													<td style="text-align: left;">@inicial.get(1)</td>
													<td style="text-align: center;">@inicial.get(24)</td>
													<td style="text-align: center;">@inicial.get(2)</td>
													<td style="text-align: left;">@inicial.get(3)</td>
													<td style="text-align: center;">
														<div style="display: none;">@utilities.Fechas.AAMMDD(inicial.get(4))</div>
														@inicial.get(4)
													</td>
													<td style="text-align: left;">@inicial.get(5)</td>
													<td style="text-align: center;">@inicial.get(9)</td>
													<td style="text-align: left;">@inicial.get(10)</td>
													<td style="text-align: center;">@inicial.get(7)</td>
													<td style="text-align: center;">@inicial.get(8)</td>
													<td style="text-align: center;">@inicial.get(11)</td>
													
													<td style="text-align: right;">@inicial.get(12)</td>
													<td style="text-align: right;">@inicial.get(13)</td>
													<td style="text-align: right;">@inicial.get(14)</td>
													
													<td style="text-align: right;">@inicial.get(15)</td>
													
													
													<td style="text-align: right;">@inicial.get(16)</td>
													<td style="text-align: right;" class="@lista1.get(0)_total5">@inicial.get(17)</td>
													<td style="text-align: right;">@inicial.get(18)</td>
													<td style="text-align: right;" class="@lista1.get(0)_total7">@inicial.get(19)</td>
												</TR>
								 			}
								 			<TR style="background-color: #9FF781">
												<td style="background-color: #9FF781" colspan="13">TOTALES NETO (sin ajustes)</td>
												<td style="background-color: #9FF781"><div align="right" id="@lista1.get(0)_total1"></div></td>
												<td style="background-color: #9FF781"><div align="right" id="@lista1.get(0)_total2"></div></td>
												<td style="background-color: #9FF781"><div align="right" id="@lista1.get(0)_total3"></div></td>
												<td style="background-color: #9FF781"><div align="right" id="@lista1.get(0)_total4"></div></td>
												<td style="background-color: #9FF781"><div align="right" id="@lista1.get(0)_total5"></div></td>
												<td style="background-color: #9FF781"><div align="right" id="@lista1.get(0)_total6"></div></td>
												<td style="background-color: #9FF781"><div align="right" id="@lista1.get(0)_total7"></div></td>
											</tr>
										</tbody>
									</table>
								}
							}
					
						</div>
					</td>
				</tr>
			</table>
			
		</div>
		
	}
		
		
		
		<script type="text/javascript">
			  $(document).ready(function () {
				
			let subtotal = 0;
			$(".subtotal").each(function() {
				let val = $(this).text().replace(/,/g,'');
				subtotal += parseFloat(val);
			});
			$("#subtotal").text(formatStandar(subtotal,0));
			
			let ajuste = 0;
			$(".ajuste").each(function() {
				let val = $(this).text().replace(/,/g,'');
				ajuste += parseFloat(val);
			});
			$("#ajuste").text(formatStandar(ajuste,0));
			
			let total = 0;
			$(".total").each(function() {
				let val = $(this).text().replace(/,/g,'');
				total += parseFloat(val);
			});
			$("#total").text(formatStandar(total,0));
			
			
			
			@for(lista1 <- totalesPorProyecto){
				
				subtotal = 0;
				$(".@lista1.get(0)_resumenTot1").each(function() {
					let val = $(this).text().replace(/,/g,'');
					subtotal += parseFloat(val);
				});
				$("#@lista1.get(0)_resumenTot1").text(formatStandar(subtotal,'2'));
				
				subtotal = 0;
				$(".@lista1.get(0)_resumenTot2").each(function() {
					let val = $(this).text().replace(/,/g,'');
					subtotal += parseFloat(val);
				});
				$("#@lista1.get(0)_resumenTot2").text(formatStandar(subtotal,'@cantDec'));
				
				subtotal = 0;
				$(".@lista1.get(0)_total7").each(function() {
					let val = $(this).text().replace(/,/g,'');
					subtotal += parseFloat(val);
				});
				$("#@lista1.get(0)_total7").text(formatStandar(subtotal,'@cantDec'));
				
				
				subtotal = 0;
				$(".@lista1.get(0)_resumenTot21").each(function() {
					let val = $(this).text().replace(/,/g,'');
					subtotal += parseFloat(val);
				});
				$("#@lista1.get(0)_resumenTot21").text(formatStandar(subtotal,'2'));
				
				subtotal = 0;
				$(".@lista1.get(0)_resumenTot22").each(function() {
					let val = $(this).text().replace(/,/g,'');
					subtotal += parseFloat(val);
				});
				$("#@lista1.get(0)_resumenTot22").text(formatStandar(subtotal,'@cantDec'));
				
				subtotal = 0;
				$(".@lista1.get(0)_resumenTot23").each(function() {
					let val = $(this).text().replace(/,/g,'');
					subtotal += parseFloat(val);
				});
				$("#@lista1.get(0)_resumenTot23").text(formatStandar(subtotal,'@cantDec'));
				
				subtotal = 0;
				$(".@lista1.get(0)_resumenTot24").each(function() {
					let val = $(this).text().replace(/,/g,'');
					subtotal += parseFloat(val);
				});
				$("#@lista1.get(0)_resumenTot24").text(formatStandar(subtotal,'@cantDec'));
				
			}
			/*
			
			
			
			
			
			
			/*
			subtotal = 0;
			$(".resumenTotal1").each(function() {
				let val = $(this).text().replace(/,/g,'');
				subtotal += parseFloat(val);
			});
			$("#resumenTotal1").text(formatStandar(subtotal,0));
			
			let ajuste = 0;
			$(".ajustes").each(function() {
				let val = $(this).text().replace(/,/g,'');
				ajuste += parseFloat(val);
			});
			$("#resumenTotal12").text(formatStandar(subtotal+ajuste,0));
			$("#totalTotal").val(subtotal+ajuste);
			
				*/
				
				
				
				
				
				
				
				

		 				
			        document.getElementById('mostrarmostrar').style.display="block"; 
			   });
		</script>
		
		
	
