@(mapDiccionario: Map[String,String], mapPermiso: Map[String,String], userMnu: utilities.UserMnu,
listaGuias: List[tables.Guia], listaTransporte: List[tables.Transportista], fechaDesde: String, fechaHasta: String)

    	
@main("") {

	@menues(mapDiccionario, mapPermiso, userMnu, " ")
	
	@modalContactoBodega(mapDiccionario)
	
	<div id="mostrarmostrar" style="display:none;">
		@barraTitulo(mapDiccionario, "MOVIMIENTOS Y DESPACHOS EFECTUADOS","(SIN IMAGENES)")
		<div class="row  justify-content-md-center">
			<div class="col-xs-12 col-sm-11 col-md-11 col-lg-11">
			
			
			
				<div class="noprint">
					<table class="table table-sm table-condensed table-fluid">
						<tr>
							<td>
								<div align="center">
									<button type="button"  class="btn btn-sm btn-success" onclick="document.getElementById('excel').submit()">
										Exportar a Excel
									</button>
									<button type="button" class="btn btn-sm btn-success" tabindex="-1" onclick="window.print(); return false;" >
										Imprimir
									</button>
									<button type="button"  class="btn btn-sm btn-success" 
										onclick="history.go(-1);return false;">
										Volver
									</button>
								</div>
							</td>
						</tr>
					</table>
				</div>
				
				
				<form id="excel" class="formulario" method="post" action="/movimientoListarExcel/">
					<input type="hidden" name="fechaDesde" value="@fechaDesde">
					<input type="hidden" name="fechaHasta" value="@fechaHasta">
				</form>
		
				<table id="tablaPrincipal" class="table table-sm table-hover table-bordered table-condensed table-fluid">
					<thead style="background-color: #eeeeee">
						<TR>
							<TH>TIPO</TH>
							<TH>COMERCIAL</TH>
							<TH>Nro<br>@mapDiccionario.get("OT")</TH>
							<TH>Nro<br>COTI</TH>
							<TH>Nro<br>MOV</TH>
							<TH>Nro<br>REF</TH>
							<TH>SELECT</TH>
							<TH style="min-width:80px;">FECHA<br>MOV</TH>
							<TH style="min-width:80px;">FECHA<br>INI/TER</TH>
							<TH>SUCURSAL<br>DESDE</TH>
							<TH>DESDE<br>@mapDiccionario.get("BODEGA")/PROYECTO</TH>
							<TH>SUCURSAL<br>HASTA</TH>
							<TH>HASTA<br>@mapDiccionario.get("BODEGA")/PROYECTO</TH>
							<TH>SELECT</TH>
							<TH>TOTAL<BR>KG</TH>
							@if( ! (mapPermiso.get("parametro.escondeLosM2")!=null && mapPermiso.get("parametro.escondeLosM2").equals("1")) ) {
								<TH>TOTAL<BR>M2</TH>
							}
							<TH>GUIA<br>PDF</TH>
							@if(!mapPermiso.get("parametro.movimientoListar-descargaXLSX").equals("1")){
								<TH>GUIA<br>EXCEL</TH>
							}
							<TH>ANEXO</TH>
							<TH>ALBUM</TH>
							@if(mapPermiso.get("parametro.movimientoListar-descargaXLSX").equals("1")){
								<TH>EXCEL</TH>
							}
							@if(mapPermiso.get("parametro.movimientoListar-descargarXLM").equals("1")){
								<TH>XML</TH>
							}
							@if(mapPermiso.get("parametro.movimientoListar-llenarApiManager").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
								<TH>API<br>Manager</TH>
							}
							@if(mapPermiso.get("parametro.movimientoListar-llenarApiNubox").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
								<TH>API<br>Nubox</TH>
							}
							@if(mapPermiso.get("parametro.movimientoListar-llenarWebFacturacion").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
								<TH>WEB<br>Facturacion</TH>
								<TH>DTE</TH>
							}
							@if(mapPermiso.get("parametro.movimientoListar-llenarWebMaximise")!=null && mapPermiso.get("parametro.movimientoListar-llenarWebMaximise").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
								<TH>WEB<br>Maximise</TH>
								<TH>Nro.Int</TH>
							}
							@if(mapPermiso.get("parametro.movimientoListar-llenarWebIConstruye")!=null && mapPermiso.get("parametro.movimientoListar-llenarWebIConstruye").equals("1")){
								<TH>ICONSTRUYE<br>GUIAS</TH>
							}
							@if(mapPermiso.get("parametro.movimientoListar-llenarApiRelBase")!=null && mapPermiso.get("parametro.movimientoListar-llenarApiRelBase").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
								<TH>API<br>RELBASE</TH>
							}
							@if(mapPermiso.get("parametro.movimientoListar-llenarApiSapSchwager")!=null && mapPermiso.get("parametro.movimientoListar-llenarApiSapSchwager").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
								<TH>API<br>SAP</TH>
								<TH>Folio</TH>
							}
							@if(mapPermiso.get("parametro.movimientoListar-llenarWebSoftlandDesk")!=null && mapPermiso.get("parametro.movimientoListar-llenarWebSoftlandDesk").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
								<TH>WEB<br>SOFTLAND</TH>
								<TH>Folio</TH>
							}
						</TR>
					</thead>
					<tbody>
						@for(lista1 <- listaGuias){
							<TR>
								<td  style="text-align:center;">@lista1.getTipoGuia()</td>
								<td  style="text-align:center;">@lista1.getNameComercial()</td>
								<td  style="text-align:center;">
									@if(lista1.getNumeroCotizacion()!=0){
										<a href="#" onclick="verOt('@lista1.getId_ot()')">
											<kbd style="background-color: #73C6B6">@lista1.getNumeroOt()</kbd>
										</a>
									}else{
										--
									}
								</td>
								<td  style="text-align:center;">
									@if(lista1.getNumeroCotizacion()!=0){
										@lista1.getNumeroCotizacion()
									}else{
										--
									}
								</td>
								<td  style="text-align:center;">@lista1.getNumero()</td>
								<td  style="text-align:center;">@lista1.getNumGuiaCliente()</td>
								<td style="text-align:center;">
									<a href="/movimientoDetalleGuia/@lista1.getId()">
										<kbd style="background-color: #73C6B6">select</kbd>
									</a>
								</td>
								<td  style="text-align:center; min-width:80px;">
									<div style="display:none">@lista1.getFecha()</div>
									@utilities.Fechas.DDMMAA(lista1.getFecha())
								</td>
								<td  style="text-align:center; min-width:80px;">
									<div style="display:none">@lista1.getFechaIniTerGuia()</div>
									@utilities.Fechas.DDMMAA(lista1.getFechaIniTerGuia())
								</td>
								<td  style="text-align:left;">@lista1.getNameSucursalOrigen()</td>
								<td style="text-align:left;"><a href="#" onclick="buscaBodega('@lista1.getBodegaOrigen()')">@lista1.getBodegaOrigen()</a></td>
								<td  style="text-align:left;">@lista1.getNameSucursalDestino()</td>
								<td style="text-align:left;"><a href="#" onclick="buscaBodega('@lista1.getBodegaDestino()')">@lista1.getBodegaDestino()</a></td>
								
								<td style="text-align:center;">
									<a href="/movimientoDetalleGuia/@lista1.getId()">
										<kbd style="background-color: #73C6B6">select</kbd>
									</a>
								</td>
								<td style="text-align:right;">
									@lista1.getTotalKg()
								</td>
								@if( ! (mapPermiso.get("parametro.escondeLosM2")!=null && mapPermiso.get("parametro.escondeLosM2").equals("1")) ) {
									<td style="text-align:right;">
										@lista1.getTotalM2()
									</td>
								}
								<td  style="text-align:center;">
									@if(lista1.getGuiaPDF().equals("0")){
										--
									}else{
										<a href="#" onclick="mostrarPDFmasAlbum('@lista1.getId()','@lista1.getGuiaPDF()')">
											<kbd style="background-color: #85C1E9">pdf</kbd>
										</a>
									}
								</td>
								
								@if(!mapPermiso.get("parametro.movimientoListar-descargaXLSX").equals("1")){
									<td style="text-align:center;">
										<a href="#" onclick="descargaEnExcel('@lista1.getId()')">
											<kbd style="background-color: #85C1E9">xls</kbd>
										</a>
									</td>
								}
								
								<td style="text-align:center;">
									@if(lista1.getDocAnexo().equals("0")){
										--
									}else{
										<a href="#" onclick="descargaDocumento('@lista1.getDocAnexo()')">
											<kbd style="background-color: #7F8C8D">doc</kbd>
										</a>
									}
								</td>
								
								<td style="text-align:center;">
									@if(lista1.getFotos().equals("0")){
										--
									}else{
										<a href="/muestraAlbumFotos/@lista1.getFotos()">
											<kbd style="background-color: #7F8C8D">Ver</kbd>
										</a>
									}
								</td>
						
								@if(mapPermiso.get("parametro.movimientoListar-descargaXLSX").equals("1")){
									<td style="text-align:center;">
										<a href="#" onclick="descargaXLSX('@lista1.getId()','@lista1.getId_transportista()')">
											<kbd style="background-color: #C39BD3">xlsx</kbd>
										</a>
									</td>
								}
						
							
								@if(mapPermiso.get("parametro.movimientoListar-descargarXLM").equals("1")){
									<td style="text-align:center;">
										@if(lista1.getTipoGuia().equals(mapDiccionario.get("Despacho"))){
											<a href="#" onclick="descargarXML('@lista1.getId()','@lista1.getId_transportista()')">
												<kbd style="background-color: #C39BD3">enviar</kbd>
											</a>
										}else{
											--
										}
									</td>
								}
								@if(mapPermiso.get("parametro.movimientoListar-llenarApiManager").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
									<td style="text-align:center;">
										@if(lista1.getTipoGuia().equals(mapDiccionario.get("Despacho"))){
											<a href="#" onclick= "llenarApiManager('@lista1.getId()','@lista1.getId_transportista()')">
												<kbd style="background-color: #C39BD3">enviar</kbd>
											</a>
										}else{
											--
										}
									</td>
								}
								@if(mapPermiso.get("parametro.movimientoListar-llenarApiNubox").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
									<td style="text-align:center;">
										@if(lista1.getTipoGuia().equals(mapDiccionario.get("Despacho"))){

											@if(lista1.getLinkFolio.equals("0")){
												<a href="#" onclick= "llenarApiNubox('@lista1.getId()','@lista1.getId_transportista()')">
													<kbd style="background-color: #C39BD3">enviar</kbd>
												</a>
											}else{
												<a href="#" onclick= "llenarApiNubox('@lista1.getId()','@lista1.getId_transportista()')">
													<kbd style="background-color: #85C1E9">reenviar</kbd>
												</a>
											}
										}else{
											--
										}
									</td>
								}
								@if(mapPermiso.get("parametro.movimientoListar-llenarWebFacturacion").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
									<td style="text-align:center;">
										@if(lista1.getTipoGuia().equals(mapDiccionario.get("Despacho"))){
											@if(lista1.getGuiaXml().equals("0")){
												<a href="#" onclick= "llenarWebFacturacion('@lista1.getId()','@lista1.getId_transportista()')">
													<kbd style="background-color: #C39BD3">enviar</kbd>
												</a>
											}else{
												<a href="#" onclick= "llenarWebFacturacion('@lista1.getId()','@lista1.getId_transportista()')">
													<kbd style="background-color: #85C1E9">reenviar</kbd>
												</a>
											}
											
										}else{
											--
										}
									</td>
									<td style="text-align:center;">
										@if(lista1.getTipoGuia().equals(mapDiccionario.get("Despacho"))){
											@if(!lista1.getLinkFolio().equals("0")){
												<a href="@lista1.getLinkFolio()" >
													<kbd style="background-color: rgb(50, 215, 75)">DTE</kbd>
												</a>
											}else{
												--
											}
										}else{
											--
										}
									</td>
								}
								
								@if(mapPermiso.get("parametro.movimientoListar-llenarWebMaximise")!=null && mapPermiso.get("parametro.movimientoListar-llenarWebMaximise").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
									<td style="text-align:center;">
										@if(lista1.getTipoGuia().equals(mapDiccionario.get("Despacho"))){
											@if(lista1.getGuiaXml().equals("0")){
												<a href="#" onclick= "llenarWebMaximise('@lista1.getId()','@lista1.getId_transportista()')">
													<kbd style="background-color: #C39BD3">enviar</kbd>
												</a>
											}else{
												<a href="#" onclick= "llenarWebMaximise('@lista1.getId()','@lista1.getId_transportista()')">
													<kbd style="background-color: #85C1E9">reenviar</kbd>
												</a>
											}
											
										}else{
											--
										}
									</td>
									<td style="text-align:center;">
										@if(lista1.getTipoGuia().equals(mapDiccionario.get("Despacho"))){
											@if(!lista1.getLinkFolio().equals("0")){
												<a href="/downGuiaMaximiseAjax/@lista1.getLinkFolio()" > 
												<kbd style="background-color: rgb(50, 215, 75)">@lista1.getLinkFolio()</kbd>
											</a> 
											}else{
												--
											}
										}else{
											--
										}
									</td>
								}
								
								@if(mapPermiso.get("parametro.movimientoListar-llenarWebIConstruye")!=null && mapPermiso.get("parametro.movimientoListar-llenarWebIConstruye").equals("1")){
									<td style="text-align:center;">
											@if(lista1.getLinkFolio().equals("0")){
												<a href="#" onclick="llenarWebIConstruye('@lista1.getId()','@lista1.getId_transportista()')">
													<kbd style="background-color: #C39BD3">IC</kbd>
												</a>
											}else{
												<a href="#" onclick="downGuiaIconstruye('@lista1.getId()')">
													<kbd style="background-color: rgb(0, 143, 81)">GUIA: @lista1.getLinkFolio()</kbd>
												</a>
											}
									</td>
								}
								
								@if(mapPermiso.get("parametro.movimientoListar-llenarApiRelBase")!=null && mapPermiso.get("parametro.movimientoListar-llenarApiRelBase").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
									<td style="text-align:center;">
										@if(lista1.getLinkFolio().equals("0")){
											<a href="#" onclick= "llenarApiRelBase('@lista1.getId()','@lista1.getId_transportista()')">
												<kbd style="background-color: #C39BD3">enviar</kbd>
											</a>
										}else{
											@if(!lista1.getLinkFolio().equals("0")){
												<div id="pdfRelBase_@lista1.getLinkFolio()">
													<a href="#" onclick="pdfReBase('@lista1.getLinkFolio()')">
														<kbd style="background-color: rgb(50, 215, 75)">Guia: @lista1.getLinkFolio()</kbd>
													</a>
												</div>
											}else{
												--
											}
										}
									</td>
								}
								
								@if(mapPermiso.get("parametro.movimientoListar-llenarApiSapSchwager")!=null && mapPermiso.get("parametro.movimientoListar-llenarApiSapSchwager").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
									<td style="text-align:center;">
										@if(lista1.getLinkFolio().equals("0")){
											<a href="#" onclick= "llenarApiSapSchwager('@lista1.getId()','@lista1.getId_transportista()')">
												<kbd style="background-color: #C39BD3">enviar</kbd>
											</a>
										}else{
											<a href="#" onclick= "llenarApiSapSchwager('@lista1.getId()','@lista1.getId_transportista()')">
												<kbd style="background-color: #85C1E9">reenviar</kbd>
											</a>
										}
									</td>
									<td style="text-align:center;">
										@if(!lista1.getLinkFolio().equals("0")){
											@lista1.getLinkFolio()
										}else{
											--
										}
									</td>
								}

								@if(mapPermiso.get("parametro.movimientoListar-llenarWebSoftlandDesk")!=null && mapPermiso.get("parametro.movimientoListar-llenarWebSoftlandDesk").equals("1") && mapPermiso.get("enviarApiGuia")!=null){
									<td style="text-align:center;">
									@if(lista1.getLinkFolio().equals("0")){
										<a href="#" onclick= "llenarWebSoftlandDesk('@lista1.getId()','@lista1.getId_transportista()')">
											<kbd style="background-color: #C39BD3">enviar</kbd>
										</a>
									}else{
										<a href="#" onclick= "llenarWebSoftlandDesk('@lista1.getId()','@lista1.getId_transportista()')">
											<kbd style="background-color: #85C1E9">reenviar</kbd>
										</a>
									}
									</td>
									<td style="text-align:center;">
									@if(!lista1.getLinkFolio().equals("0")){
										@lista1.getLinkFolio()
									}else{
										--
									}
									</td>
								}
							</TR>
			 			}
					</tbody>
				</table>
			</div>
		</div>
		<div class="noprint">
			<div class="row justify-content-md-center" >
				<div class="col-xs-5 col-sm-2 col-md-2 col-lg-2">
					<input type="button"  value="LISTO" class="btn btn-success btn-sm rounded-pill btn-block" onclick="location.href='/home/';">
				</div>
			</div>
		</div>
	</div>
	
	<div id='modalVerOt' class='modal' role='dialog' data-backdrop='static' data-keyboard='false'>
		<div class='modal-dialog modal-dialog-scrollable' style="max-width: 80% !important;" role='document'>
			<div class='modal-content'>
				<div class='modal-header'>
					<h5 class="modal-title">@mapDiccionario.get("ORDEN_DE_TRABAJO")</h5>
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				          <span aria-hidden="true">×</span>
				        </button>
			</div>
			<div class="modal-body">
				<div id="mostrarLaOt"></div>
   				<div class='row'>
						<div class='col-sm-12' style='text-align:center'>
							<button type='button' class='btn btn-sm  btn-success' style='font-size: 10px;' data-dismiss='modal'>Listo</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div id='modalVerCotizacion' class='modal' role='dialog' data-backdrop='static' data-keyboard='false'>
		<div class='modal-dialog modal-dialog-scrollable' style="max-width: 80% !important;" role='document'>
			<div class='modal-content'>
				<div class='modal-header'>
					<h5 class='modal-title'>COTIZACION</h5>
				        <button type='button' class='close' data-dismiss='modal' aria-label='Close'>
				          <span aria-hidden='true'>&times;</span>
				        </button>
				</div>
				<div class='modal-body'>
					<div id='mostrarLaCotizacion'></div>
	   				<div class='row'>
						<div class='col-sm-12' style='text-align:center'>
							<button type='button' class='btn btn-sm  btn-success' style='font-size: 10px;' data-dismiss='modal'>Listo</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div id='muestraPDF' class='modal' role='dialog' data-backdrop='static' data-keyboard='false'>
		<div class='modal-dialog modal-dialog-scrollable modal-lg' role='document'>
			<div class='modal-content'>
				<div class='modal-header'>
					<h5 class='modal-title' id="titMuestraPdf">MOVIMIENTO</h5>
				        <button type='button' class='close' data-dismiss='modal' aria-label='Close'>
				          <span aria-hidden='true'>&times;</span>
				        </button>
				</div>
				<div class='modal-body'>
					<div id="rutaPDF"></div>
	   				<div class='row'>
						<div class='col-sm-12' style='text-align:center'>
							<button type='button' class='btn btn-sm  btn-success' style='font-size: 10px;' data-dismiss='modal'>Listo</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div id='selectSucursal' class='modal' role='dialog' data-backdrop='static' data-keyboard='false'>
		<div class='modal-dialog modal-dialog-scrollable modal-sm' role='document'>
			<div class='modal-content'>
				<div class='modal-header'>
					<h5 class='modal-title'>Seleccione Sucursal</h5>
				</div>
				<div class='modal-body'>
					<a href="" onclick="selectSucursal('1');" data-dismiss='modal'>1 SANTIAGO</a>
					<br>
					<a href="" onclick="selectSucursal('2');" data-dismiss='modal'>2 ANTOFAGASTA</a>
				</div>
			</div>
		</div>
	</div>

	<div id='modalSoftlandDesk' class='modal' role='dialog' data-backdrop='static' data-keyboard='false'>
		<div class='modal-dialog modal-dialog-scrollable modal-lg' role='document'>
			<div class='modal-content'>
				<div class='modal-header'>
					<h5 class='modal-title'>Seleccione Valores</h5>
				</div>
				<div class='modal-body'>
					<table id="tablaPrincipal" class="table table-sm table-hover table-bordered table-condensed table-fluid">
						<tbody>
							<tr>
								<td>
									<label>Concepto de Salida a Bodega</label>
								</td>
								<td>
									<div id="sel_Concepto_de_Salida_a_Bodega"></div>
								</td>
							</tr>
							<tr>
								<td>
									<label>Codigo Condicion de Pago</label>
								</td>
								<td>
									<div id="sel_Codigo_Condicion_de_Pago"></div>
								</td>
							</tr>
							<tr>
								<td>
									<label>Bodega Origen de los Productos</label>
								</td>
								<td>
									<div id="sel_Bodega_Origen_de_los_Productos"></div>
								</td>
							</tr>
							<tr>
								<td>
									<label>Codigo Centro de Costo</label>
								</td>
								<td>
									<div id="sel_Codigo_Centro_de_Costo"></div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class='modal-foot'>
					<div style="text-align: center;">
						<button type='button' class='btn btn-sm btn-light' style='font-size: 10px;' data-dismiss='modal' onclick="limpiarTransportista()">Cancelar</button>
						<button type='button' class='btn btn-sm  btn-success' onclick="document.getElementById('formEnviaWebSoftland').submit();" style='font-size: 10px;' data-dismiss='modal'>ENVIAR</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<form class="formulario" id="formDescargaDocumento" method="post" action="/downloadPDF/">	
		<input type="hidden" id="descargaDocumento" name="nombreArchivo">
	</form>
	
	<form class="formulario" id="formDescargaXLSX" method="post" action="/generaGuiaXLS/">	
		<input type="hidden" id="id_guiaXLSX" name="id_guia">
		<input type="hidden" id="id_transportistaXLSX" name="id_transportista"  value="0">
	</form>
	
	<form class="formulario" id="formDescargaExcel" method="post" action="/generaGuiaExcel/">	
		<input type="hidden" id="id_guiaExcel" name="id_guia">
	</form>
	
	<form class="formulario" id="formDescargaXML" method="post" action="/generaGuiaXML/">	
		<input type="hidden" id="id_guiaXML" name="id_guia">
		<input type="hidden" id="id_transportistaXML" name="id_transportista" value="0">
	</form>
	
	<form class="formulario" id="formEnviaApiManager" method="post" action="/generaGuiaApiManager/">	
		<input type="hidden" id="id_guiaManager" name="id_guia">
		<input type="hidden" id="id_transportistaManager" name="id_transportista" value="0">
	</form>
	
	<form class="formulario" id="formEnviaApiNubox" method="post" action="/generaGuiaApiNubox/">	
		<input type="hidden" id="id_guiaNubox" name="id_guia">
		<input type="hidden" id="id_transportistaNubox" name="id_transportista" value="0">
	</form>
	
	<form class="formulario" id="formEnviaWebFacturacion" method="post" action="/generaGuiaWebFacturacion/">	
		<input type="hidden" id="id_guiaFacturacion" name="id_guia">
		<input type="hidden" id="id_transportistaFacturacion" name="id_transportista" value="0">
	</form>
	
	<form class="formulario" id="formEnviaWebMaximise" method="post" action="/generaGuiaWebMaximise/">	
		<input type="hidden" id="id_guiaMaximise" name="id_guia">
		<input type="hidden" id="id_transportistaMaximise" name="id_transportista" value="0">
		<input type="hidden" id="sucursalMaximise" name="sucurMaximise" value="0">
	</form>
	
	<form class="formulario" id="formEnviaWebIConstruye" method="post" action="/generaGuiaWebIConstruye/">	
		<input type="hidden" id="id_guiaIConstruye" name="id_guia">
		<input type="hidden" id="id_transportistaIConstruye" name="id_transportista" value="0">
	</form>
	
	<form class="formulario" id="downGuiaIconstruye" method="post" action="/downGuiaIconstruye/">	
		<input type="hidden" id="id_guiaIConstruye2" name="id_guia">
	</form>
	
	<form class="formulario" id="formEnviaApiRelBase" method="post" action="/generaGuiaApiRelBase/">	
		<input type="hidden" id="id_guiaRelBase" name="id_guia">
		<input type="hidden" id="id_transportistaRelBase" name="id_transportista" value="0">
		<input type="hidden" id="id_cotizaSolucionRelBase" name="id_cotizaSolucion" value="0">
		<input type="hidden" id="descriptionRelBase" name="description" value=" ">
		<input type="hidden" id="observacionesRelBase" name="observaciones" value=" ">
		<input type="hidden" name="fechaDesde" value="@fechaDesde">
		<input type="hidden" name="fechaHasta" value="@fechaHasta">
	</form>
	
	<form class="formulario" id="formEnviaSapSchwager" method="post" action="/generaGuiaSapSchwager/">	
		<input type="hidden" id="id_guiaSapSchwager" name="id_guia">
		<input type="hidden" id="id_transportistaSapSchwager" name="id_transportista" value="0">
		<input type="hidden" name="fechaDesde" value="@fechaDesde">
		<input type="hidden" name="fechaHasta" value="@fechaHasta">
	</form>

	<form class="formulario" id="formEnviaWebSoftland" method="post" action="/generaGuiaWebSoftland/">
		<input type="hidden" id="id_guiaWebSoftland" name="id_guia">
		<input type="hidden" id="id_transportistaWebSoftland" name="id_transportista" value="0">
		<input type="hidden" name="fechaDesde" value="@fechaDesde">
		<input type="hidden" name="fechaHasta" value="@fechaHasta">

		<input type="hidden" id="Concepto_de_Salida_a_Bodega" name="Concepto_de_Salida_a_Bodega" value="16">
		<input type="hidden" id="Codigo_Condicion_de_Pago" name="Codigo_Condicion_de_Pago" value="3">
		<input type="hidden" id="Bodega_Origen_de_los_Productos" name="Bodega_Origen_de_los_Productos" value="02">
		<input type="hidden" id="Codigo_Centro_de_Costo" name="Codigo_Centro_de_Costo" value="01-000">

	</form>

	
	@modalListaTransportistas(mapDiccionario, mapPermiso, listaTransporte);

}


<script type="text/javascript">

	let auxId_transportista = 0;
	
	const transportistaSeleccionado = () => {
		var tableReg = document.getElementById("tablaListaTransporte");
		for (var i = 1; i < tableReg.rows.length; i++){
			var cellsOfRow = tableReg.rows[i].getElementsByTagName('td');
			let idTransporte = cellsOfRow[0].innerHTML;
			if(idTransporte == auxId_transportista){
				tableReg.rows[i].style.backgroundColor = "yellow";
				
			}else{
				tableReg.rows[i].style.backgroundColor = "";
			}
		}
	}

	$(document).ready(function() {
		 $('#tablaPrincipal').DataTable({
		    	"fixedHeader": true,
		    	"lengthMenu": [[20, 50, 100, 200, -1], [20, 50, 100, 200, "All"]],
		    	"order": [[ 4, "desc" ]],
		    	"language": {
		        	"url": "https://cdn.datatables.net/plug-ins/1.13.7/i18n/es-ES.json"
		        }
		  } );
		  document.getElementById('mostrarmostrar').style.display="block";
	});
	
	const verOt = (id_ot) => {
		var formData = new FormData();
	  	formData.append('id_ot',id_ot);
        $.ajax({
            url: "/verOtAjax/",
            type: "POST",
            method: "POST",
            data: formData,
            cache: false,
            contentType: false,
	     	processData: false,
	     	success: function(respuesta){
	     		document.getElementById('mostrarLaOt').innerHTML = respuesta;
	     		$('#modalVerOt').modal('show');
	     	}
        });
	}
	
	const verCotizacion = (id_cotizacion) => {
		var formData = new FormData();
	  	formData.append('id_cotizacion',id_cotizacion);
        $.ajax({
            url: "/verCotizacionAjax/",
            type: "POST",
            method: "POST",
            data: formData,
            cache: false,
            contentType: false,
	     	processData: false,
	     	success: function(respuesta){
	     		document.getElementById('mostrarLaCotizacion').innerHTML = respuesta;
	     		$('#modalVerCotizacion').modal('show');
	     	}
        });
	}
	
	const mostrarPDFmasAlbum = (id_guia, nombrePDF) => {
		  document.getElementById('rutaPDF').innerHTML="<object data='/showPdfmasAlbum/"+id_guia+","+nombrePDF+"' type='application/pdf' width='100%' height='720'></object>";
		  $('#muestraPDF').modal('show');
	}
	
	const descargaDocumento = (nombreDOC) => {
		  $('#descargaDocumento').val(nombreDOC);
		  document.getElementById('formDescargaDocumento').submit();
	}
	
	const descargaXLSX = (id_guia, id_transportista) => {
		auxId_guia = id_guia;
		auxLlenarTransportista = 1;
		auxId_transportista = id_transportista;
		transportistaSeleccionado();
		$('#modalListaTransporte').modal('show');
	}
	
	const descargaEnExcel = (id_guia) => {
		$('#id_guiaExcel').val(id_guia);
		document.getElementById('formDescargaExcel').submit();
	}
	
	const descargarXML = (id_guia, id_transportista) => {
		auxId_guia = id_guia;
		auxLlenarTransportista = 2;
		auxId_transportista = id_transportista;
		transportistaSeleccionado();
		$('#modalListaTransporte').modal('show');
	}
	
	const llenarApiManager = (id_guia, id_transportista) => {
		auxId_guia = id_guia;
		auxLlenarTransportista = 3;
		auxId_transportista = id_transportista;
		transportistaSeleccionado();
		$('#modalListaTransporte').modal('show');
	}
	
	const llenarApiNubox = (id_guia, id_transportista) => {
		auxId_guia = id_guia;
		auxLlenarTransportista = 4;
		auxId_transportista = id_transportista;
		transportistaSeleccionado();
		$('#modalListaTransporte').modal('show');
	}
	
	const llenarWebFacturacion = (id_guia, id_transportista) => {
		auxId_guia = id_guia;
		auxLlenarTransportista = 5;
		auxId_transportista = id_transportista;
		transportistaSeleccionado();
		$('#modalListaTransporte').modal('show');
	}
	
	const llenarWebMaximise = (id_guia, id_transportista) => {
		auxId_guia = id_guia;
		auxLlenarTransportista = 6;
		auxId_transportista = id_transportista;
		transportistaSeleccionado();
		$('#modalListaTransporte').modal('show');
	}
	
	const llenarWebIConstruye = (id_guia, id_transportista) => {
		auxId_guia = id_guia;
		auxLlenarTransportista = 7;
		auxId_transportista = id_transportista;
		transportistaSeleccionado();
		$('#modalListaTransporte').modal('show');
	}
	
	const llenarApiRelBase = (id_guia, id_transportista) => {
		auxId_guia = id_guia;
		auxLlenarTransportista = 8;
		auxId_transportista = id_transportista;
		transportistaSeleccionado();
		$('#modalListaTransporte').modal('show');
	}
	
	const llenarApiSapSchwager = (id_guia, id_transportista) => {
		auxId_guia = id_guia;
		auxLlenarTransportista = 9;
		auxId_transportista = id_transportista;
		transportistaSeleccionado();
		$('#modalListaTransporte').modal('show');
	}

	const llenarWebSoftlandDesk = (id_guia, id_transportista) => {
		auxId_guia = id_guia;
		auxLlenarTransportista = 10;
		auxId_transportista = id_transportista;
		transportistaSeleccionado();
		$('#modalListaTransporte').modal('show');
	}
	
	
	
	let auxId_guia = 0;
	let auxLlenarTransportista = 0;
	const seleccionaTransportista = (id_transportista) => {
		$('#modalListaTransporte').modal('hide');
		
		if(auxLlenarTransportista==1){
			$('#id_guiaXLSX').val(auxId_guia);
			$('#id_transportistaXLSX').val(id_transportista);
			document.getElementById('formDescargaXLSX').submit();
		}
		
		if(auxLlenarTransportista==2){
			$('#id_guiaXML').val(auxId_guia);
			$('#id_transportistaXML').val(id_transportista);
			document.getElementById('formDescargaXML').submit();
		}
		
		if(auxLlenarTransportista==3){
			$('#id_guiaManager').val(auxId_guia);
			$('#id_transportistaManager').val(id_transportista);
			document.getElementById('formEnviaApiManager').submit();
		}
		
		if(auxLlenarTransportista==4){
			$('#id_guiaNubox').val(auxId_guia);
			$('#id_transportistaNubox').val(id_transportista);
			document.getElementById('formEnviaApiNubox').submit();
		}
		
		if(auxLlenarTransportista==5){
			$('#id_guiaFacturacion').val(auxId_guia);
			$('#id_transportistaFacturacion').val(id_transportista);
			document.getElementById('formEnviaWebFacturacion').submit();
		}
		
		if(auxLlenarTransportista==6){
			auxId_transportista = id_transportista;
			$('#selectSucursal').modal('show');
		}
		
		if(auxLlenarTransportista==7){
			$('#id_guiaIConstruye').val(auxId_guia);
			$('#id_transportistaIConstruye').val(id_transportista);
			document.getElementById('formEnviaWebIConstruye').submit();
		}
		
		if(auxLlenarTransportista==8){
			$('#id_guiaRelBase').val(auxId_guia);
			$('#id_transportistaRelBase').val(id_transportista);
			$('#modalListaTransporte').modal('hide');
			buscaSolucion(auxId_guia, id_transportista);
			$('#modalAdicRelBase').modal('show');
		}
		
		if(auxLlenarTransportista==9){
			$('#id_guiaSapSchwager').val(auxId_guia);
			$('#id_transportistaSapSchwager').val(id_transportista);
			document.getElementById('formEnviaSapSchwager').submit();
		}

		if(auxLlenarTransportista==10){
			$('#id_guiaWebSoftland').val(auxId_guia);
			$('#id_transportistaWebSoftland').val(id_transportista);
			$('#modalListaTransporte').modal('hide');
			openModalSoftlandDesk();
			//document.getElementById('formEnviaWebSoftland').submit();
		}
		
	}
	
	const enviarRelBase = () =>{
		$('#id_cotizaSolucionRelBase').val($('#id_cotizaSolucion').val());
			$('#descriptionRelBase').val($('#description').val());
			$('#observacionesRelBase').val($('#observaciones').val());
			document.getElementById('formEnviaApiRelBase').submit();
	}
	
	const pdfReBase = (nroFiscal) =>{
		$('#linkRelBase').text("GUIA");
		document.getElementById('rutaPDF').innerHTML="<object data='/showPdfRelBase/"+52+","+nroFiscal+"' type='application/pdf' width='100%' height='720'></object>";
		$('#muestraPDF').modal('show');
	}
	
	const selectSucursal = sucurMaximise =>{
		$('#id_guiaMaximise').val(auxId_guia);
		$('#id_transportistaMaximise').val(auxId_transportista);
		$('#sucursalMaximise').val(sucurMaximise);
		document.getElementById('formEnviaWebMaximise').submit();
	}
	
	const downGuia = nroIntGuia =>{
		var formData = new FormData();
	  	formData.append('nroIntGuia',nroIntGuia);
        $.ajax({
            url: "/downGuiaMaximiseAjax/",
            type: "POST",
            method: "POST",
            data: formData,
            cache: false,
            contentType: false,
	     	processData: false,
	     	success: function(respuesta){
	     		
	     	}
        });
	}
	
	const downGuiaIconstruye = id_guia =>{
		$('#id_guiaIConstruye2').val(id_guia);
		document.getElementById('downGuiaIconstruye').submit();
	}


	const openModalSoftlandDesk = () =>{
		$.ajax({
			url: "/jsonVariablesGuiaSoftlandDesk/",
			type: "POST",
			method: "POST",
			cache: false,
			contentType: false,
			processData: false,
			success: function(rs){

				let datos = rs["conceptoDeSalidaABodega"];
				let Concepto_de_Salida_a_Bodega =
						"<select  onchange='$(\"#Concepto_de_Salida_a_Bodega\").val(value)'>"+
						"<option value='16'>16 : Despacho No Constituye Venta</option>";
				for(var i in datos){
					Concepto_de_Salida_a_Bodega += "<option value='"+datos[i][0]+"'>"+datos[i][0]+" : "+datos[i][1]+"</option>";
				}
				Concepto_de_Salida_a_Bodega += "</select>";
				document.getElementById('sel_Concepto_de_Salida_a_Bodega').innerHTML = Concepto_de_Salida_a_Bodega;

				datos = rs["codigoCondicionDePagoGuia"];
				let Codigo_Condicion_de_Pago =
						"<select  onchange='$(\"#Codigo_Condicion_de_Pago\").val(value)'>"+
						"<option value='3'>3 : Sin costo</option>";
				for(var i in datos){
					Codigo_Condicion_de_Pago += "<option value='"+datos[i][0]+"'>"+datos[i][0]+" : "+datos[i][1]+"</option>";
				}
				Codigo_Condicion_de_Pago += "</select>";
				document.getElementById('sel_Codigo_Condicion_de_Pago').innerHTML = Codigo_Condicion_de_Pago;

				datos = rs["bodegaOrigenDeLosProductos"];
				let Bodega_Origen_de_los_Productos =
						"<select  onchange='$(\"#Bodega_Origen_de_los_Productos\").val(value)'>"+
						"<option value='02'>02 : BODEGA DISPONIBLE</option>";
				for(var i in datos){
					Bodega_Origen_de_los_Productos += "<option value='"+datos[i][0]+"'>"+datos[i][0]+" : "+datos[i][1]+"</option>";
				}
				Bodega_Origen_de_los_Productos += "</select>";
				document.getElementById('sel_Bodega_Origen_de_los_Productos').innerHTML = Bodega_Origen_de_los_Productos;


				datos = rs["codigoCentroDeCosto"];
				let Codigo_Centro_de_Costo =
						"<select  onchange='$(\"#Codigo_Centro_de_Costo\").val(value)'>"+
						"<option value='01-000'>01-000 : Administración Gral.</option>";
				for(var i in datos){
					Codigo_Centro_de_Costo += "<option value='"+datos[i][0]+"'>"+datos[i][0]+" : "+datos[i][1]+"</option>";
				}
				Codigo_Centro_de_Costo += "</select>";
				document.getElementById('sel_Codigo_Centro_de_Costo').innerHTML = Codigo_Centro_de_Costo;
			}
		});
		$('#modalSoftlandDesk').modal('show');
	}
	
</script>

		
		
	
